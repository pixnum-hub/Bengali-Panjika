<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ</title>

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">

<!-- Theme & Mobile Web App -->
<meta name="theme-color" content="#d4a030" id="metaTheme">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">

<!-- SEO & Social -->
<meta name="description" content="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ ‚Äî ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶ô‡ßç‡¶ó, ‡¶§‡¶ø‡¶•‡¶ø, ‡¶®‡¶ï‡ßç‡¶∑‡¶§‡ßç‡¶∞, ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§ ‡¶ì ‡¶â‡ßé‡¶∏‡¶¨ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡•§ ¬© Manik Roy 2026">
<meta name="author" content="Manik Roy">
<meta property="og:title" content="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ">
<meta property="og:description" content="‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶ô‡ßç‡¶ó, ‡¶§‡¶ø‡¶•‡¶ø, ‡¶®‡¶ï‡ßç‡¶∑‡¶§‡ßç‡¶∞, ‡ß®‡ß´ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§ ‡¶ì ‡¶â‡ßé‡¶∏‡¶¨ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">
<meta property="og:image" content="icon-512.png">
<meta property="og:type" content="website">

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Bengali:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0c0c18;--bg2:#13132a;--bg3:#1a1a38;--bg4:#222248;
  --text:#ede5d8;--text2:#8888aa;--text3:#4a4a70;
  --accent:#d4a030;--accent2:#f0c848;--accent3:#7744cc;--accent4:#3399ff;
  --border:#252550;--card:#101025;--cell:#141430;
  --today-bg:#2a1e00;--today-bd:#d4a030;
  --sel-bg:#180a38;--sel-bd:#7744cc;
  --fdot:#ff3355;--mdot:#3399ff;
  --good:#44bb55;--bad:#ee4444;--neutral:#ff9900;
  --shadow:0 8px 48px rgba(0,0,0,.65);
  --hg:linear-gradient(150deg,#1c0a48 0%,#091828 55%,#1c0818 100%);
}
.L{
  --bg:#f6f1e7;--bg2:#ede6d5;--bg3:#e2d8c2;--bg4:#d4c8a0;
  --text:#1a1205;--text2:#6b5030;--text3:#9a7040;
  --accent:#8b5500;--accent2:#b07800;--accent3:#5828aa;--accent4:#1a70cc;
  --border:#c8b888;--card:#fdf8ef;--cell:#f8f3e6;
  --today-bg:#fff3bb;--today-bd:#b07800;
  --sel-bg:#eaddff;--sel-bd:#5828aa;
  --fdot:#cc1133;--mdot:#1a70cc;
  --shadow:0 8px 48px rgba(0,0,0,.14);
  --hg:linear-gradient(150deg,#3a1870 0%,#182858 55%,#38103a 100%);
}
.O{
  --bg:#000;--bg2:#060606;--bg3:#0c0c0c;--bg4:#111;
  --text:#fff;--text2:#686868;--text3:#363636;
  --accent:#f0a820;--accent2:#ffd040;--accent3:#aa44ff;--accent4:#44aaff;
  --border:#1a1a1a;--card:#000;--cell:#040408;
  --today-bg:#180e00;--today-bd:#f0a820;
  --sel-bg:#08002a;--sel-bd:#aa44ff;
  --fdot:#ff2244;--mdot:#44aaff;
  --good:#33cc44;--bad:#ff3333;
  --shadow:0 8px 48px rgba(255,180,0,.07);
  --hg:linear-gradient(150deg,#0e0028 0%,#001018 55%,#0e0012 100%);
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Noto Serif Bengali',serif;min-height:100vh;display:flex;flex-direction:column;transition:background .35s,color .35s}
/* HEADER */
.hdr{background:var(--hg);padding:1.5rem 1rem 1rem;text-align:center;border-bottom:2px solid var(--accent);box-shadow:var(--shadow);position:relative;overflow:hidden}
.hdr::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% -20%,rgba(212,160,48,.22),transparent 65%);pointer-events:none}
.hdr .sri{display:block;font-size:.72rem;letter-spacing:.4em;color:var(--accent2);opacity:.6;margin-bottom:.3rem}
.hdr h1{font-size:clamp(1.3rem,5vw,2.3rem);font-weight:900;color:var(--accent2);text-shadow:0 0 28px rgba(240,200,70,.4);line-height:1.2}
.hdr h2{font-size:clamp(.68rem,2vw,.82rem);color:var(--text2);font-weight:300;margin-top:.2rem;letter-spacing:.06em}
/* THEME */
.tbar{background:var(--bg2);display:flex;justify-content:center;gap:.4rem;padding:.42rem;border-bottom:1px solid var(--border);flex-wrap:wrap}
.tb{padding:.25rem .8rem;border:1px solid var(--border);border-radius:20px;background:var(--bg3);color:var(--text2);font-family:inherit;font-size:.72rem;cursor:pointer;transition:all .2s}
.tb.on,.tb:hover{border-color:var(--accent);color:var(--accent);background:var(--card)}
/* NOW BADGE */
.now-badge{background:linear-gradient(90deg,var(--accent3),var(--accent));color:#fff;text-align:center;padding:.32rem .8rem;font-size:.75rem;font-weight:700;letter-spacing:.04em}
/* MAIN */
.main{flex:1;padding:.9rem .9rem 1.5rem;max-width:800px;margin:0 auto;width:100%}
/* SECTION TITLE */
.st{font-size:.88rem;font-weight:700;color:var(--accent2);text-align:center;padding:.5rem .6rem;margin:.9rem 0 .7rem;border-bottom:1px solid var(--border);letter-spacing:.06em}
.st::before,.st::after{content:'‚ú¶';margin:0 .4rem;opacity:.4;font-size:.65rem}
/* CONTROLS */
.ctrl{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:.85rem 1rem;margin-bottom:.9rem;box-shadow:var(--shadow)}
.crow{display:flex;align-items:center;gap:.45rem;margin-bottom:.6rem;flex-wrap:wrap}
.crow:last-child{margin-bottom:0}
.clbl{font-size:.75rem;color:var(--text2);min-width:76px;font-weight:600}
select,input[type=number]{flex:1;background:var(--bg2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-family:inherit;font-size:.84rem;padding:.4rem .65rem;outline:none;transition:border .2s;min-width:65px}
select:focus,input:focus{border-color:var(--accent)}
.btoday{background:var(--accent);color:#180800;border:none;border-radius:8px;padding:.4rem .9rem;font-family:inherit;font-size:.78rem;font-weight:700;cursor:pointer;transition:background .2s,transform .1s;white-space:nowrap}
.btoday:hover{background:var(--accent2);transform:scale(1.04)}
/* MONTH CALENDAR */
.mcal{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:.9rem;box-shadow:var(--shadow)}
.mcal-hdr{background:linear-gradient(120deg,var(--accent3) 0%,#180840 100%);padding:.85rem 1rem;display:flex;align-items:center;justify-content:space-between;gap:.4rem}
.mnav{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:var(--accent2);border-radius:8px;padding:.3rem .75rem;font-size:.8rem;cursor:pointer;transition:background .18s;font-family:inherit}
.mnav:hover{background:rgba(255,255,255,.22)}
.mcal-title{text-align:center;flex:1}
.mname{font-size:1.6rem;font-weight:900;color:var(--accent2);text-shadow:0 0 18px rgba(240,200,70,.4)}
.myear{font-size:.78rem;color:rgba(255,255,255,.65);margin-top:.12rem}
/* Weekday header */
.wdhdr{display:grid;grid-template-columns:repeat(7,1fr);background:var(--bg3);border-bottom:1px solid var(--border)}
.wdh{text-align:center;padding:.4rem .1rem;font-size:.64rem;font-weight:700;color:var(--text2)}
.wdh:first-child,.wdh:last-child{color:#f05050}
/* Grid */
.cgrid{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:var(--border)}
.cc{background:var(--cell);min-height:62px;padding:.3rem .25rem;cursor:pointer;transition:background .15s;position:relative;display:flex;flex-direction:column;gap:2px;overflow:hidden}
.cc:hover{background:var(--bg4)}
.cc.emp{background:var(--bg);cursor:default;opacity:.2}
.cc.tod{background:var(--today-bg);outline:2px solid var(--today-bd);outline-offset:-2px;z-index:2}
.cc.sel{background:var(--sel-bg);outline:2px solid var(--sel-bd);outline-offset:-2px;z-index:3}
.cc.sun .dn,.cc.sat .dn{color:#f05050}
.dn{font-size:.98rem;font-weight:900;color:var(--text);line-height:1}
.den{font-size:.55rem;color:var(--text3);line-height:1;margin-top:1px}
.tod-lbl{font-size:.46rem;background:var(--accent);color:#000;border-radius:3px;padding:0 3px;font-weight:900;position:absolute;top:2px;right:2px}
.fl{font-size:.5rem;color:var(--accent2);line-height:1.25;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;word-break:break-all;margin-top:1px}
.dots{display:flex;gap:2px;flex-wrap:wrap;margin-top:auto}
.dot{width:5px;height:5px;border-radius:50%}
.df{background:var(--fdot)}
.dm{background:var(--mdot)}
/* LEGEND */
.legend{display:flex;gap:.8rem;justify-content:center;padding:.4rem;font-size:.62rem;color:var(--text2);flex-wrap:wrap;border-top:1px solid var(--border);background:var(--bg2)}
.leg{display:flex;align-items:center;gap:.25rem}
.leg .dot{width:7px;height:7px}
/* DAY DETAIL */
.ddet{background:var(--card);border:2px solid var(--accent3);border-radius:16px;margin-bottom:.9rem;overflow:hidden;box-shadow:var(--shadow)}
.ddet-hdr{background:linear-gradient(105deg,var(--accent3),#180840 75%);padding:.8rem 1rem;display:flex;align-items:center;gap:.8rem}
.dbn{font-size:2.8rem;font-weight:900;color:var(--accent2);line-height:1;min-width:62px;text-align:center}
.dinfo{flex:1}
.dwd{font-size:.95rem;font-weight:700;color:#fff}
.dsub{font-size:.68rem;color:rgba(255,255,255,.6);margin-top:.15rem;line-height:1.55}
.dmoon{font-size:1.9rem}
.dbody{padding:.75rem .9rem}
.dr{display:flex;justify-content:space-between;align-items:flex-start;padding:.4rem 0;border-bottom:1px solid var(--border);gap:.4rem}
.dr:last-child{border-bottom:none}
.dk{font-size:.7rem;color:var(--text2);font-weight:600;min-width:105px;padding-top:.05rem}
.dv{font-size:.84rem;color:var(--text);font-weight:700;text-align:right;flex:1}
.gold{color:var(--accent2)}
.purp{color:var(--accent3)}
.red{color:var(--bad)}
.blue{color:var(--accent4)}
.grn{color:var(--good)}
/* Sun boxes */
.sunrow{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;margin-top:.6rem}
.sunbox{background:var(--bg2);border-radius:10px;padding:.5rem;text-align:center;border:1px solid var(--border)}
.si{font-size:1.35rem}
.sl{font-size:.6rem;color:var(--text2);margin-top:.1rem}
.sv{font-size:.85rem;font-weight:700;color:var(--accent2);margin-top:.08rem}
/* Fest in day */
.fbox{margin-top:.65rem;background:linear-gradient(135deg,rgba(212,160,48,.1),rgba(119,68,204,.07));border:1px solid var(--accent);border-radius:10px;padding:.6rem .85rem}
.fbox-t{font-size:.67rem;color:var(--accent2);font-weight:700;margin-bottom:.38rem;letter-spacing:.04em}
.fitem{display:flex;align-items:flex-start;gap:.45rem;padding:.3rem 0;border-bottom:1px solid var(--border)}
.fitem:last-child{border-bottom:none}
.femoji{font-size:1rem;min-width:20px;text-align:center;margin-top:.05rem}
.fname{font-size:.8rem;font-weight:700;color:var(--text)}
.fdesc{font-size:.64rem;color:var(--text2);margin-top:.08rem}
.ftag{font-size:.58rem;padding:.1rem .35rem;border-radius:6px;font-weight:700;white-space:nowrap;margin-left:auto;align-self:flex-start;flex-shrink:0}
/* Upcoming */
.upbox{margin-top:.65rem}
.up-t{font-size:.67rem;color:var(--text2);font-weight:700;margin-bottom:.32rem}
.upitem{display:flex;align-items:center;gap:.45rem;padding:.26rem 0;border-bottom:1px solid var(--border);cursor:pointer}
.upitem:last-child{border-bottom:none}
.upitem:hover .un{color:var(--accent2)}
.ue{font-size:.88rem;min-width:18px}
.un{font-size:.76rem;font-weight:700;color:var(--text);flex:1;transition:color .15s}
.ud{font-size:.62rem;color:var(--text3)}
.uo{font-size:.62rem;font-weight:700;color:var(--accent2);white-space:nowrap}
/* MUHURTAS - ALL 25 for the selected day */
.muh-grid{display:flex;flex-direction:column;gap:.32rem;padding:.75rem}
.muh-item{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:.52rem .8rem;display:grid;grid-template-columns:1fr auto;align-items:center;gap:.4rem;transition:border-color .18s,transform .12s}
.muh-item:hover{border-color:var(--accent);transform:translateX(3px)}
.muh-left{}
.muh-name{font-size:.82rem;font-weight:700;color:var(--text)}
.muh-desc{font-size:.64rem;color:var(--text2);margin-top:.1rem}
.muh-time{font-size:.65rem;color:var(--accent2);margin-top:.06rem;font-weight:600}
.mbadge{font-size:.62rem;padding:.14rem .4rem;border-radius:20px;font-weight:700;white-space:nowrap}
.mg{background:rgba(68,187,85,.14);color:var(--good);border:1px solid rgba(68,187,85,.3)}
.mb{background:rgba(238,68,68,.14);color:var(--bad);border:1px solid rgba(238,68,68,.3)}
.mn{background:rgba(255,153,0,.14);color:var(--neutral);border:1px solid rgba(255,153,0,.3)}
/* PANCHANG */
.pgrid{display:grid;grid-template-columns:1fr 1fr;gap:.42rem;padding:.75rem}
.pi{display:flex;flex-direction:column;padding:.5rem .7rem;background:var(--bg2);border-radius:8px;border-left:3px solid var(--accent3)}
.pik{font-size:.62rem;color:var(--text2);margin-bottom:.1rem}
.piv{font-size:.85rem;font-weight:700;color:var(--text)}
/* Vertical date */
.vdt{padding:.65rem .8rem}
.vr{display:grid;grid-template-columns:128px 1fr;padding:.44rem .25rem;border-bottom:1px solid var(--border);align-items:center;gap:.4rem;border-radius:6px;transition:background .14s}
.vr:last-child{border-bottom:none}
.vr:hover{background:var(--bg3)}
.vrk{font-size:.68rem;color:var(--text2);font-weight:600}
.vrv{font-size:.88rem;font-weight:700;color:var(--text)}
/* Festival list */
.fcard{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:.9rem;box-shadow:var(--shadow)}
.fsrch{background:var(--bg2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-family:inherit;font-size:.8rem;padding:.4rem .7rem;width:100%;outline:none;transition:border .2s}
.fsrch:focus{border-color:var(--accent)}
.mtabs{display:flex;overflow-x:auto;gap:.28rem;padding:.42rem .55rem;scrollbar-width:none;border-bottom:1px solid var(--border)}
.mtabs::-webkit-scrollbar{display:none}
.mtab{white-space:nowrap;padding:.24rem .58rem;border-radius:20px;border:1px solid var(--border);background:var(--bg2);color:var(--text2);font-family:inherit;font-size:.66rem;cursor:pointer;transition:all .18s}
.mtab.on,.mtab:hover{border-color:var(--accent);color:var(--accent);background:var(--card)}
.fmhdr{background:var(--bg3);padding:.52rem .85rem;display:flex;align-items:center;gap:.48rem;cursor:pointer;user-select:none;border-bottom:1px solid var(--border)}
.fmic{font-size:1.1rem}
.fmn{font-size:.86rem;font-weight:700;color:var(--accent2);flex:1}
.fmc{font-size:.66rem;background:var(--accent3);color:#fff;padding:.1rem .42rem;border-radius:10px}
.fmar{color:var(--text3);transition:transform .24s;font-size:.78rem}
.fmbody{padding:.28rem .5rem .5rem}
.fi{display:grid;grid-template-columns:38px 1fr auto;align-items:center;gap:.45rem;padding:.38rem .25rem;border-bottom:1px solid var(--border);cursor:pointer;border-radius:6px;transition:background .14s}
.fi:last-child{border-bottom:none}
.fi:hover{background:var(--bg3)}
.fidc{text-align:center}
.fid{font-size:.9rem;font-weight:900;color:var(--accent2);line-height:1}
.fie{font-size:.7rem}
.fin{font-size:.8rem;font-weight:700;color:var(--text)}
.fis{font-size:.63rem;color:var(--text2);margin-top:.07rem}
.hidden{display:none}
/* Tags */
.th{background:rgba(255,152,0,.13);color:#ffa726;border:1px solid rgba(255,152,0,.28)}
.tb2{background:rgba(240,200,70,.13);color:#e4b840;border:1px solid rgba(240,200,70,.28)}
.tn{background:rgba(68,187,85,.13);color:#55cc66;border:1px solid rgba(68,187,85,.28)}
.tm{background:rgba(0,195,215,.13);color:#22ccdd;border:1px solid rgba(0,195,215,.28)}
.tc{background:rgba(66,165,245,.13);color:#42a5f5;border:1px solid rgba(66,165,245,.28)}
.tg{background:rgba(140,88,200,.13);color:#9966cc;border:1px solid rgba(140,88,200,.28)}
footer{background:var(--bg2);border-top:1px solid var(--border);text-align:center;padding:.8rem;font-size:.7rem;color:var(--text2);line-height:1.85}
footer em{color:var(--accent);font-style:normal}
@keyframes fup{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.mcal,.ddet{animation:fup .32s ease}
</style>
</head>
<body>
<header class="hdr">
  <span class="sri">‡•• ‡¶∂‡ßç‡¶∞‡ßÄ ‡••</span>
  <h1>üåô ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ</h1>
  <h2>‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶ô‡ßç‡¶ó ‚Ä¢ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§ ‚Ä¢ ‡¶â‡ßé‡¶∏‡¶¨</h2>
</header>
<div class="tbar">
  <button class="tb on" onclick="setTheme('',this)">üåë ‡¶°‡¶æ‡¶∞‡ßç‡¶ï</button>
  <button class="tb" onclick="setTheme('L',this)">‚òÄÔ∏è ‡¶≤‡¶æ‡¶á‡¶ü</button>
  <button class="tb" onclick="setTheme('O',this)">‚ö´ OLED</button>
</div>
<div class="now-badge" id="nowBadge">‚è∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
<main class="main">
<!-- CONTROLS -->
<div class="ctrl">
  <div class="crow">
    <span class="clbl">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶∏‡¶æ‡¶≤</span>
    <input type="number" id="inYear" min="-1000000" max="1000000"/>
    <button class="btoday" onclick="goToday()">üìÖ ‡¶Ü‡¶ú</button>
    <button class="btoday" onclick="resetAll()" style="background:var(--bg3);color:var(--text2);border:1px solid var(--border)" title="‡¶∏‡¶¨ ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®">üîÑ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
  </div>
  <div class="crow">
    <span class="clbl">‡¶Æ‡¶æ‡¶∏</span>
    <select id="inMonth">
      <option value="0">‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ</option><option value="1">‡¶ú‡ßç‡¶Ø‡ßà‡¶∑‡ßç‡¶†</option>
      <option value="2">‡¶Ü‡¶∑‡¶æ‡¶¢‡¶º</option><option value="3">‡¶∂‡ßç‡¶∞‡¶æ‡¶¨‡¶£</option>
      <option value="4">‡¶≠‡¶æ‡¶¶‡ßç‡¶∞</option><option value="5">‡¶Ü‡¶∂‡ßç‡¶¨‡¶ø‡¶®</option>
      <option value="6">‡¶ï‡¶æ‡¶∞‡ßç‡¶§‡¶ø‡¶ï</option><option value="7">‡¶Ö‡¶ó‡ßç‡¶∞‡¶π‡¶æ‡¶Ø‡¶º‡¶£</option>
      <option value="8">‡¶™‡ßå‡¶∑</option><option value="9">‡¶Æ‡¶æ‡¶ò</option>
      <option value="10">‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶®</option><option value="11">‡¶ö‡ßà‡¶§‡ßç‡¶∞</option>
    </select>
  </div>
</div>
<!-- MONTH CALENDAR -->
<div class="mcal" id="mcal">
  <div class="mcal-hdr">
    <button class="mnav" onclick="shiftM(-1)">‚óÄ</button>
    <div class="mcal-title">
      <div class="mname" id="mname"></div>
      <div class="myear" id="myear"></div>
    </div>
    <button class="mnav" onclick="shiftM(1)">‚ñ∂</button>
  </div>
  <div class="wdhdr">
    <div class="wdh">‡¶∞‡¶¨‡¶ø</div><div class="wdh">‡¶∏‡ßã‡¶Æ</div><div class="wdh">‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤</div>
    <div class="wdh">‡¶¨‡ßÅ‡¶ß</div><div class="wdh">‡¶¨‡ßÉ‡¶π‡¶É</div><div class="wdh">‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞</div><div class="wdh">‡¶∂‡¶®‡¶ø</div>
  </div>
  <div class="cgrid" id="cgrid"></div>
  <div class="legend">
    <div class="leg"><div class="dot dm"></div>‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ/‡¶Ö‡¶Æ‡¶æ‡¶¨‡¶∏‡ßç‡¶Ø‡¶æ</div>
    <div class="leg"><div class="dot df"></div>‡¶â‡ßé‡¶∏‡¶¨</div>
    <div class="leg" style="color:var(--today-bd)">‚ñ† ‡¶Ü‡¶ú</div>
    <div class="leg" style="color:var(--sel-bd)">‚ñ† ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§</div>
  </div>
</div>
<!-- DAY DETAIL -->
<div class="st">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</div>
<div class="ddet" id="ddet"></div>
<!-- PANCHANG -->
<div class="mcal" id="panchaCard" style="margin-bottom:.9rem">
  <div class="mcal-hdr" style="padding:.65rem 1rem">
    <div class="mcal-title"><div style="font-size:.85rem;font-weight:700;color:var(--accent2)" id="ptitle">‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶ô‡ßç‡¶ó</div></div>
  </div>
  <div class="pgrid" id="pgrid"></div>
  <div style="border-top:1px solid var(--border)"><div class="vdt" id="vdt"></div></div>
</div>
<!-- MUHURTAS FOR SELECTED DAY -->
<div class="st">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡ß®‡ß´‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§</div>
<div class="mcal" style="margin-bottom:.9rem">
  <div class="muh-grid" id="muhGrid"></div>
</div>
<!-- FESTIVALS -->
<div class="st">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶â‡ßé‡¶∏‡¶¨ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</div>
<div class="fcard">
  <div style="padding:.65rem .75rem .28rem">
    <input class="fsrch" id="fsrch" placeholder="üîç ‡¶â‡ßé‡¶∏‡¶¨ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." oninput="filterF(this.value)"/>
  </div>
  <div class="mtabs" id="mtabs"></div>
  <div id="fcont"></div>
</div>
</main>
<footer>
  <div>¬© <em>‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï ‡¶∞‡¶æ‡¶Ø‡¶º</em> <em id="fy1">2026</em> ‚Ä¢ ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§‡•§</div>
  <div>¬© <em>Manik Roy</em> <em id="fy2">2026</em>. All Rights Reserved.</div>
  <div style="opacity:.38;font-size:.62rem;margin-top:.25rem">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ ‚Ä¢ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ú‡ßç‡¶Ø‡ßã‡¶§‡¶ø‡¶∞‡ßç‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ ‡¶ó‡¶£‡¶®‡¶æ</div>
</footer>

<script>
'use strict';
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BENGALI DIGITS & CONSTANTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const BD = ['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'];
function bn(n){
  const neg = n < 0;
  const s = Math.abs(Math.round(n)).toString();
  return (neg ? '-' : '') + s.split('').map(c => BD[+c]).join('');
}
function bnf(n, dec=0){ // format with decimals
  const neg = n < 0;
  const fixed = Math.abs(n).toFixed(dec);
  return (neg ? '-' : '') + fixed.replace(/[0-9]/g, d => BD[+d]);
}

const BN_M  = ['‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ','‡¶ú‡ßç‡¶Ø‡ßà‡¶∑‡ßç‡¶†','‡¶Ü‡¶∑‡¶æ‡¶¢‡¶º','‡¶∂‡ßç‡¶∞‡¶æ‡¶¨‡¶£','‡¶≠‡¶æ‡¶¶‡ßç‡¶∞','‡¶Ü‡¶∂‡ßç‡¶¨‡¶ø‡¶®','‡¶ï‡¶æ‡¶∞‡ßç‡¶§‡¶ø‡¶ï','‡¶Ö‡¶ó‡ßç‡¶∞‡¶π‡¶æ‡¶Ø‡¶º‡¶£','‡¶™‡ßå‡¶∑','‡¶Æ‡¶æ‡¶ò','‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶®','‡¶ö‡ßà‡¶§‡ßç‡¶∞'];
// Official Bengali calendar day counts (Government of West Bengal / Bangladesh)
// Baishakh-Bhadra: 31 days; Ashwin-Chaitra: 30 days
// Leap year: Falgun = 31 days (Gregorian leap year rule)
const BN_MD_NORM = [31,31,31,31,31,30,30,30,30,30,30,30];
const BN_MD_LEAP = [31,31,31,31,31,30,30,30,30,30,31,30];

const BN_WD = ['‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞','‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞','‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞','‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞','‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞','‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞','‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞'];
const BN_WD_S = ['‡¶∞‡¶¨‡¶ø','‡¶∏‡ßã‡¶Æ','‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤','‡¶¨‡ßÅ‡¶ß','‡¶¨‡ßÉ‡¶π‡¶É','‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞','‡¶∂‡¶®‡¶ø'];
const ENG_M  = ['January','February','March','April','May','June','July','August','September','October','November','December'];
const HI_M   = ['‡¶Æ‡ßÅ‡¶π‡¶∞‡¶∞‡¶Æ','‡¶∏‡¶´‡¶∞','‡¶∞‡¶¨‡¶ø‡¶â‡¶≤ ‡¶Ü‡¶â‡¶Ø‡¶º‡¶æ‡¶≤','‡¶∞‡¶¨‡¶ø‡¶â‡¶∏ ‡¶∏‡¶æ‡¶®‡¶ø','‡¶ú‡¶Æ‡¶æ‡¶¶‡¶ø‡¶â‡¶≤ ‡¶Ü‡¶â‡¶Ø‡¶º‡¶æ‡¶≤','‡¶ú‡¶Æ‡¶æ‡¶¶‡¶ø‡¶â‡¶∏ ‡¶∏‡¶æ‡¶®‡¶ø','‡¶∞‡¶ú‡¶¨','‡¶∂‡¶æ‡¶¨‡¶æ‡¶®','‡¶∞‡¶Æ‡¶ú‡¶æ‡¶®','‡¶∂‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤','‡¶ú‡¶ø‡¶≤‡¶ï‡¶¶','‡¶ú‡¶ø‡¶≤‡¶π‡¶ú'];

const TITHIS_30 = [
  '‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶™‡¶¶','‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º‡¶æ','‡¶§‡ßÉ‡¶§‡ßÄ‡¶Ø‡¶º‡¶æ','‡¶ö‡¶§‡ßÅ‡¶∞‡ßç‡¶•‡ßÄ','‡¶™‡¶û‡ßç‡¶ö‡¶Æ‡ßÄ','‡¶∑‡¶∑‡ßç‡¶†‡ßÄ','‡¶∏‡¶™‡ßç‡¶§‡¶Æ‡ßÄ',
  '‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ','‡¶®‡¶¨‡¶Æ‡ßÄ','‡¶¶‡¶∂‡¶Æ‡ßÄ','‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ','‡¶¶‡ßç‡¶¨‡¶æ‡¶¶‡¶∂‡ßÄ','‡¶§‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶¶‡¶∂‡ßÄ','‡¶ö‡¶§‡ßÅ‡¶∞‡ßç‡¶¶‡¶∂‡ßÄ','‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',
  '‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶™‡¶¶','‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º‡¶æ','‡¶§‡ßÉ‡¶§‡ßÄ‡¶Ø‡¶º‡¶æ','‡¶ö‡¶§‡ßÅ‡¶∞‡ßç‡¶•‡ßÄ','‡¶™‡¶û‡ßç‡¶ö‡¶Æ‡ßÄ','‡¶∑‡¶∑‡ßç‡¶†‡ßÄ','‡¶∏‡¶™‡ßç‡¶§‡¶Æ‡ßÄ',
  '‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ','‡¶®‡¶¨‡¶Æ‡ßÄ','‡¶¶‡¶∂‡¶Æ‡ßÄ','‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ','‡¶¶‡ßç‡¶¨‡¶æ‡¶¶‡¶∂‡ßÄ','‡¶§‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶¶‡¶∂‡ßÄ','‡¶ö‡¶§‡ßÅ‡¶∞‡ßç‡¶¶‡¶∂‡ßÄ','‡¶Ö‡¶Æ‡¶æ‡¶¨‡¶∏‡ßç‡¶Ø‡¶æ'
];
const PAKSHA = ['‡¶∂‡ßÅ‡¶ï‡ßç‡¶≤‡¶™‡¶ï‡ßç‡¶∑ (‡¶∂‡ßÅ‡¶ï‡ßç‡¶≤‡¶™‡¶ï‡ßç‡¶∑)','‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡¶™‡¶ï‡ßç‡¶∑ (‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡¶™‡¶ï‡ßç‡¶∑)'];
const NAKSH  = ['‡¶Ö‡¶∂‡ßç‡¶¨‡¶ø‡¶®‡ßÄ','‡¶≠‡¶∞‡¶£‡ßÄ','‡¶ï‡ßÉ‡¶§‡ßç‡¶§‡¶ø‡¶ï‡¶æ','‡¶∞‡ßã‡¶π‡¶ø‡¶£‡ßÄ','‡¶Æ‡ßÉ‡¶ó‡¶∂‡¶ø‡¶∞‡¶æ','‡¶Ü‡¶∞‡ßç‡¶¶‡ßç‡¶∞‡¶æ','‡¶™‡ßÅ‡¶®‡¶∞‡ßç‡¶¨‡¶∏‡ßÅ','‡¶™‡ßÅ‡¶∑‡ßç‡¶Ø‡¶æ','‡¶Ü‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶æ','‡¶Æ‡¶ò‡¶æ','‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶®‡ßÄ','‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶®‡ßÄ','‡¶π‡¶∏‡ßç‡¶§‡¶æ','‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ','‡¶∏‡ßç‡¶¨‡¶æ‡¶§‡ßÄ','‡¶¨‡¶ø‡¶∂‡¶æ‡¶ñ‡¶æ','‡¶Ö‡¶®‡ßÅ‡¶∞‡¶æ‡¶ß‡¶æ','‡¶ú‡ßç‡¶Ø‡ßá‡¶∑‡ßç‡¶†‡¶æ','‡¶Æ‡ßÇ‡¶≤‡¶æ','‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶∑‡¶æ‡¶¢‡¶º‡¶æ','‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶∑‡¶æ‡¶¢‡¶º‡¶æ','‡¶∂‡ßç‡¶∞‡¶¨‡¶£‡¶æ','‡¶ß‡¶®‡¶ø‡¶∑‡ßç‡¶†‡¶æ','‡¶∂‡¶§‡¶≠‡¶ø‡¶∑‡¶æ','‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶≠‡¶æ‡¶¶‡ßç‡¶∞‡¶™‡¶¶','‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶≠‡¶æ‡¶¶‡ßç‡¶∞‡¶™‡¶¶','‡¶∞‡ßá‡¶¨‡¶§‡ßÄ'];
const YOGAS  = ['‡¶¨‡¶ø‡¶∑‡ßç‡¶ï‡¶Æ‡ßç‡¶≠','‡¶™‡ßç‡¶∞‡ßÄ‡¶§‡¶ø','‡¶Ü‡¶Ø‡¶º‡ßÅ‡¶∑‡ßç‡¶Æ‡¶æ‡¶®','‡¶∏‡ßå‡¶≠‡¶æ‡¶ó‡ßç‡¶Ø','‡¶∂‡ßã‡¶≠‡¶®','‡¶Ö‡¶§‡¶ø‡¶ó‡¶£‡ßç‡¶°','‡¶∏‡ßÅ‡¶ï‡¶∞‡ßç‡¶Æ‡¶æ','‡¶ß‡ßÉ‡¶§‡¶ø','‡¶∂‡ßÇ‡¶≤','‡¶ó‡¶£‡ßç‡¶°','‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø','‡¶ß‡ßç‡¶∞‡ßÅ‡¶¨','‡¶¨‡ßç‡¶Ø‡¶æ‡¶ò‡¶æ‡¶§','‡¶π‡¶∞‡ßç‡¶∑‡¶£','‡¶¨‡¶ú‡ßç‡¶∞','‡¶∏‡¶ø‡¶¶‡ßç‡¶ß‡¶ø','‡¶¨‡ßç‡¶Ø‡¶§‡ßÄ‡¶™‡¶æ‡¶§','‡¶¨‡¶∞‡ßÄ‡¶Ø‡¶º‡¶æ‡¶®','‡¶™‡¶∞‡¶ø‡¶ò','‡¶∂‡¶ø‡¶¨','‡¶∏‡¶ø‡¶¶‡ßç‡¶ß','‡¶∏‡¶æ‡¶ß‡ßç‡¶Ø','‡¶∂‡ßÅ‡¶≠','‡¶∂‡ßÅ‡¶ï‡ßç‡¶≤','‡¶¨‡ßç‡¶∞‡¶π‡ßç‡¶Æ','‡¶á‡¶®‡ßç‡¶¶‡ßç‡¶∞','‡¶¨‡ßà‡¶ß‡ßÉ‡¶§‡¶ø'];
const KARANAS= ['‡¶¨‡¶¨','‡¶¨‡¶æ‡¶≤‡¶¨','‡¶ï‡ßå‡¶≤‡¶¨','‡¶§‡ßà‡¶§‡¶ø‡¶≤','‡¶ó‡¶∞','‡¶¨‡¶£‡¶ø‡¶ú','‡¶¨‡¶ø‡¶∑‡ßç‡¶ü‡¶ø','‡¶∂‡¶ï‡ßÅ‡¶®‡¶ø','‡¶ö‡¶§‡ßÅ‡¶∑‡ßç‡¶™‡¶¶','‡¶®‡¶æ‡¶ó','‡¶ï‡¶ø‡¶Ç‡¶∏‡ßç‡¶§‡ßÅ‡¶ò‡ßç‡¶®'];
const RITUS  = ['‡¶ó‡ßç‡¶∞‡ßÄ‡¶∑‡ßç‡¶Æ','‡¶¨‡¶∞‡ßç‡¶∑‡¶æ','‡¶∂‡¶∞‡ßé','‡¶π‡ßá‡¶Æ‡¶®‡ßç‡¶§','‡¶∂‡ßÄ‡¶§','‡¶¨‡¶∏‡¶®‡ßç‡¶§'];
const MOON_P = ['üåë','üåí','üåì','üåî','üåï','üåñ','üåó','üåò'];
const M_ICO  = ['üå∏','‚òÄÔ∏è','üåßÔ∏è','üåø','üåæ','üå∫','ü™î','üåæ','‚ùÑÔ∏è','üìö','üå∑','üéã'];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ACCURATE JULIAN DAY NUMBER (Gregorian ‚Üî JD)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function gregorianToJD(y, m, d) {
  // m = 1..12
  const A = Math.floor((14 - m) / 12);
  const Y = y + 4800 - A;
  const M = m + 12 * A - 3;
  return d + Math.floor((153 * M + 2) / 5) + 365 * Y +
         Math.floor(Y / 4) - Math.floor(Y / 100) +
         Math.floor(Y / 400) - 32045;
}

function jdToGregorian(jd) {
  const a = jd + 32044;
  const b = Math.floor((4 * a + 3) / 146097);
  const c = a - Math.floor((146097 * b) / 4);
  const d = Math.floor((4 * c + 3) / 1461);
  const e = c - Math.floor((1461 * d) / 4);
  const m = Math.floor((5 * e + 2) / 153);
  const day = e - Math.floor((153 * m + 2) / 5) + 1;
  const month = m + 3 - 12 * Math.floor(m / 10); // 1..12
  const year = 100 * b + d - 4800 + Math.floor(m / 10);
  return { y: year, m: month, d: day };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BENGALI CALENDAR CONVERSIONS
   Reference epoch: 1 Baishakh 1 BS = 14 April 594 CE (Julian) 
   Modern Bangla calendar (revised Bangabda) aligns:
   1 Baishakh = 14 April (15 April in Gregorian leap years from 1901)
   Bangladesh officially: 14 April always.
   West Bengal: 14 or 15 April.
   We use the standard: 1 Baishakh BS = 14 April CE (Gregorian)
   BS year = CE year - 593 (before 14 April) or CE year - 593 (from 14 April)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function isGregorianLeap(y) {
  return (y % 4 === 0 && y % 100 !== 0) || y % 400 === 0;
}
function isBSLeap(bsYear) {
  // Bengali leap year follows the Gregorian year that starts that BS year
  // BS year N starts in CE year N+593
  // If CE year (N+594) is leap => Falgun of that BS year has 31 days
  return isGregorianLeap(bsYear + 594);
}
function getBSMonthDays(bsYear, bsMonth) {
  const md = isBSLeap(bsYear) ? BN_MD_LEAP : BN_MD_NORM;
  return md[bsMonth];
}

// Gregorian date ‚Üí Bengali date
// Uses: 1 Baishakh = 14 April each Gregorian year
function gregorianToBengali(gy, gm, gd) {
  // JD of given Gregorian date
  const jd = gregorianToJD(gy, gm, gd);
  // JD of 1 Baishakh of the BS year that probably contains this date
  // Try BS year = gy - 593
  let bsYear = gy - 593;
  let jdBaishakh1 = gregorianToJD(gy, 4, 14); // 14 April of CE year
  if (jd < jdBaishakh1) {
    bsYear = gy - 594;
    jdBaishakh1 = gregorianToJD(gy - 1, 4, 14);
  }
  // Day offset from 1 Baishakh
  let dayOffset = jd - jdBaishakh1; // 0-based
  const md = isBSLeap(bsYear) ? BN_MD_LEAP : BN_MD_NORM;
  let bsMonth = 0;
  while (bsMonth < 11 && dayOffset >= md[bsMonth]) {
    dayOffset -= md[bsMonth];
    bsMonth++;
  }
  const bsDay = dayOffset + 1;
  return { y: bsYear, m: bsMonth, d: bsDay };
}

// Bengali date ‚Üí Gregorian date
function bengaliToGregorian(bsYear, bsMonth, bsDay) {
  const ceYear = bsYear + 593;
  // JD of 1 Baishakh of this BS year = 14 April of CE year ceYear
  const jdBaishakh1 = gregorianToJD(ceYear, 4, 14);
  // Days from 1 Baishakh
  const md = isBSLeap(bsYear) ? BN_MD_LEAP : BN_MD_NORM;
  let daysOffset = 0;
  for (let i = 0; i < bsMonth; i++) daysOffset += md[i];
  daysOffset += bsDay - 1;
  const jd = jdBaishakh1 + daysOffset;
  const g = jdToGregorian(jd);
  return { y: g.y, m: g.m, d: g.d, jd: jd };
}

function bengaliToDate(bsY, bsM, bsD) {
  const g = bengaliToGregorian(bsY, bsM, bsD);
  return new Date(g.y, g.m - 1, g.d);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ACCURATE ASTRONOMICAL CALCULATIONS
   Based on Jean Meeus "Astronomical Algorithms" 2nd ed.
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DEG = Math.PI / 180;
const RAD = 180 / Math.PI;

function jdToT(jd) { return (jd - 2451545.0) / 36525.0; }

// Sun's apparent longitude (degrees) - Meeus Ch.25
function sunLongitude(jd) {
  const T = jdToT(jd);
  const T2 = T * T; const T3 = T2 * T;
  // Geometric mean longitude
  let L0 = 280.46646 + 36000.76983 * T + 0.0003032 * T2;
  L0 = ((L0 % 360) + 360) % 360;
  // Mean anomaly
  let M = 357.52911 + 35999.05029 * T - 0.0001537 * T2;
  M = ((M % 360) + 360) % 360;
  const Mrad = M * DEG;
  // Equation of centre
  const C = (1.914602 - 0.004817 * T - 0.000014 * T2) * Math.sin(Mrad)
           + (0.019993 - 0.000101 * T) * Math.sin(2 * Mrad)
           + 0.000289 * Math.sin(3 * Mrad);
  const sunLon = L0 + C;
  // Apparent longitude (nutation correction simplified)
  const omega = 125.04 - 1934.136 * T;
  const apparent = sunLon - 0.00569 - 0.00478 * Math.sin(omega * DEG);
  return ((apparent % 360) + 360) % 360;
}

// Moon's longitude (degrees) - Meeus Ch.47 simplified
function moonLongitude(jd) {
  const T = jdToT(jd);
  const T2 = T * T; const T3 = T2 * T; const T4 = T3 * T;
  // Moon's mean longitude
  let Lp = 218.3164477 + 481267.88123421 * T - 0.0015786 * T2 + T3 / 538841 - T4 / 65194000;
  Lp = ((Lp % 360) + 360) % 360;
  // Mean elongation
  let D = 297.8501921 + 445267.1114034 * T - 0.0018819 * T2 + T3 / 545868 - T4 / 113065000;
  D = ((D % 360) + 360) % 360;
  // Sun's mean anomaly
  let M = 357.5291092 + 35999.0502909 * T - 0.0001536 * T2 + T3 / 24490000;
  M = ((M % 360) + 360) % 360;
  // Moon's mean anomaly
  let Mp = 134.9633964 + 477198.8675055 * T + 0.0087414 * T2 + T3 / 69699 - T4 / 14712000;
  Mp = ((Mp % 360) + 360) % 360;
  // Moon's arg of latitude
  let F = 93.2720950 + 483202.0175233 * T - 0.0036539 * T2 - T3 / 3526000 + T4 / 863310000;
  F = ((F % 360) + 360) % 360;

  const r = DEG;
  // Longitude corrections (major terms from Meeus Table 47-A)
  let dL = 6288774 * Math.sin(Mp * r)
           + 1274027 * Math.sin((2*D - Mp) * r)
           + 658314  * Math.sin(2*D * r)
           + 213618  * Math.sin(2*Mp * r)
           - 185116  * Math.sin(M * r)
           - 114332  * Math.sin(2*F * r)
           + 58793   * Math.sin((2*D - 2*Mp) * r)
           + 57066   * Math.sin((2*D - M - Mp) * r)
           + 53322   * Math.sin((2*D + Mp) * r)
           + 45758   * Math.sin((2*D - M) * r)
           - 40923   * Math.sin((M - Mp) * r)
           - 34720   * Math.sin(D * r)
           - 30383   * Math.sin((M + Mp) * r)
           + 15327   * Math.sin((2*D - 2*F) * r)
           - 12528   * Math.sin(Mp + 2*F * r)
           + 10980   * Math.sin((Mp - 2*F) * r)
           + 10675   * Math.sin((4*D - Mp) * r)
           + 10034   * Math.sin(3*Mp * r)
           + 8548    * Math.sin((4*D - 2*Mp) * r)
           - 7888    * Math.sin((2*D + M - Mp) * r)
           - 6766    * Math.sin((2*D + M) * r)
           - 5163    * Math.sin((D - Mp) * r);
  // dL is in 0.000001 degrees
  let moonLon = Lp + dL / 1000000.0;
  moonLon = ((moonLon % 360) + 360) % 360;
  return moonLon;
}

// Tithi: based on elongation of moon from sun
// Each tithi = 12¬∞ of elongation
function calcTithi(jd) {
  const slon = sunLongitude(jd);
  const mlon = moonLongitude(jd);
  let elong = mlon - slon;
  elong = ((elong % 360) + 360) % 360;
  const tithiNum = Math.floor(elong / 12); // 0..29
  const tithiFrac = (elong % 12) / 12;
  return { num: tithiNum, frac: tithiFrac, elong: elong, slon: slon, mlon: mlon };
}

// Nakshatra: Moon's longitude / (360/27)
function calcNakshatra(jd) {
  const mlon = moonLongitude(jd);
  const idx = Math.floor(mlon / (360 / 27)) % 27;
  const frac = (mlon % (360 / 27)) / (360 / 27);
  return { idx, name: NAKSH[idx], frac, lon: mlon };
}

// Yoga: (Sun lon + Moon lon) / (360/27)
function calcYoga(jd) {
  const slon = sunLongitude(jd);
  const mlon = moonLongitude(jd);
  const sum = ((slon + mlon) % 360 + 360) % 360;
  const idx = Math.floor(sum / (360 / 27)) % 27;
  return { idx, name: YOGAS[idx] };
}

// Karana: half-tithi (each tithi has 2 karanas)
function calcKarana(jd) {
  const t = calcTithi(jd);
  // Karana number (0..59), first 4 fixed, rest cyclic
  const karanaNum = Math.floor(t.elong / 6); // 0-59
  let karanaIdx;
  if (karanaNum === 0) karanaIdx = 10; // Kimstughna
  else if (karanaNum >= 57) {
    const fix = [7,8,9,10]; // Shakuni,Chatushpada,Naga,Kimstughna
    karanaIdx = fix[karanaNum - 57];
  } else {
    karanaIdx = ((karanaNum - 1) % 7);
  }
  return { idx: karanaIdx, name: KARANAS[Math.max(0,Math.min(10,karanaIdx))] };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ACCURATE SUNRISE / SUNSET (Meeus Ch.15)
   Using coordinates for Dhaka: 23.7¬∞N, 90.4¬∞E
   (centred for Bangladesh + West Bengal)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const LAT = 23.7; // degrees N
const LON = 90.4; // degrees E
const TZ  = 6.0;  // UTC+6 (IST = 5.5, but we use 6 for BD; user can adjust)

function sunRiseSet(jd) {
  // Approximate sunrise/sunset using equation of time
  const T = jdToT(jd);
  // Solar declination
  const epsilon = 23.439292 - 0.013004 * T; // obliquity
  const slon = sunLongitude(jd);
  const sinDec = Math.sin(epsilon * DEG) * Math.sin(slon * DEG);
  const dec = Math.asin(sinDec) * RAD; // degrees

  // Hour angle for sunrise/sunset (h = -0.8333 standard refraction+disc)
  const cosHA = (Math.sin(-0.8333 * DEG) - Math.sin(LAT * DEG) * Math.sin(dec * DEG))
                / (Math.cos(LAT * DEG) * Math.cos(dec * DEG));

  if (cosHA > 1) return { rise: null, set: null }; // polar night
  if (cosHA < -1) return { rise: null, set: null }; // midnight sun

  const HA = Math.acos(cosHA) * RAD; // degrees

  // Equation of time (minutes) - simplified
  const L0rad = ((280.46646 + 36000.76983 * T) % 360) * DEG;
  const Mrad  = ((357.52911 + 35999.05029 * T) % 360) * DEG;
  const eot   = (-7.655 * Math.sin(Mrad) + 9.873 * Math.sin(2 * L0rad + 3.588 * DEG)
                + 0.439 * Math.sin(4 * L0rad)) / 60; // hours

  // Transit time (solar noon) in local time
  const transit = 12 - LON / 15 + TZ - eot;
  const riseH = transit - HA / 15;
  const setH  = transit + HA / 15;

  function toHHMM(h) {
    const hh = Math.floor(((h % 24) + 24) % 24);
    const mm = Math.round((((h % 24) + 24) % 24 - hh) * 60);
    const mm2 = mm === 60 ? 0 : mm;
    const hh2 = mm === 60 ? hh + 1 : hh;
    return bn(hh2) + ':' + (mm2 < 10 ? '‡ß¶' + bn(mm2) : bn(mm2));
  }
  return { rise: toHHMM(riseH), set: toHHMM(setH), riseH, setH, transit };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   HIJRI CONVERSION (Accurate tabular method)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function gregorianToHijri(gy, gm, gd) {
  const jd = gregorianToJD(gy, gm, gd);
  // Islamic calendar epoch: 1 Muharram 1 AH = 16 July 622 CE = JD 1948439.5
  // We use integer JD aligned to noon
  const N = jd - 1948438;
  const year  = Math.floor((11 * N + 3) / 325) + 1;
  const month = Math.floor((11 * (N - Math.floor((11 * (year - 1) * 30 + 3) / 325 + 1) * 30 - Math.floor((year - 1) / 30) * 11 + 6) + 11) / 325) + 1;
  // Simpler reliable formula:
  let L = jd - 1948439 + 10632;
  const N2 = Math.floor((L - 1) / 10631);
  L = L - 10631 * N2 + 354;
  const J = Math.floor((10985 - L) / 5316) * Math.floor((50 * L) / 17719)
           + Math.floor(L / 5670) * Math.floor((43 * L) / 15238);
  L = L - Math.floor((30 - J) / 15) * Math.floor((17719 * J) / 50)
        - Math.floor(J / 16) * Math.floor((15238 * J) / 43) + 29;
  const Hm = Math.floor((24 * L) / 709);
  const Hd = L - Math.floor((709 * Hm) / 24);
  const Hy = 30 * N2 + J - 30;
  return { y: Hy, m: Math.max(1, Math.min(12, Hm)), d: Hd };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ACCURATE 25 MUHURTAS FOR A GIVEN DAY
   Each day has 30 muhurtas (15 day + 15 night).
   Day muhurtas: from sunrise to sunset (divided into 15 equal parts).
   Night muhurtas: from sunset to next sunrise (15 parts).
   The 25 classical named muhurtas cycle through the day.
   We compute real sunrise/sunset and divide accordingly.
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const MUH_NAMES = [
  '‡¶∞‡ßÅ‡¶¶‡ßç‡¶∞','‡¶Ü‡¶π‡¶ø','‡¶Æ‡¶ø‡¶§‡ßç‡¶∞','‡¶™‡¶ø‡¶§‡ßÉ','‡¶¨‡¶∏‡ßÅ','‡¶¨‡¶æ‡¶∞‡¶æ‡¶π','‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡ßá‡¶¶‡ßá‡¶¨','‡¶¨‡¶ø‡¶ß‡¶ø',
  '‡¶∏‡¶§‡¶Æ‡ßÅ‡¶ñ‡ßÄ','‡¶™‡ßÅ‡¶∞‡ßÅ‡¶π‡ßÇ‡¶§','‡¶¨‡¶æ‡¶π‡¶ø‡¶£‡ßÄ','‡¶®‡¶ï‡ßç‡¶§‡¶®‡¶ï‡¶∞‡¶æ','‡¶¨‡¶∞‡ßÅ‡¶£','‡¶Ö‡¶∞‡ßç‡¶Ø‡¶Æ‡¶®','‡¶≠‡¶ó','‡¶ó‡¶ø‡¶∞‡ßÄ‡¶∂',
  '‡¶Ö‡¶ú‡¶™‡¶æ‡¶¶','‡¶Ö‡¶π‡¶ø‡¶∞‡¶¨‡ßÅ‡¶ß','‡¶™‡ßÅ‡¶∑‡ßç‡¶Ø','‡¶Ö‡¶∂‡ßç‡¶¨‡¶ø‡¶®‡ßÄ','‡¶Ø‡¶Æ','‡¶Ö‡¶ó‡ßç‡¶®‡¶ø','‡¶¨‡¶ø‡¶ß‡¶æ‡¶§‡ßç‡¶∞‡ßÄ','‡¶ï‡¶æ‡¶£‡ßç‡¶°','‡¶Ö‡¶¶‡¶ø‡¶§‡¶ø'
];
// Auspiciousness: G=good/‡¶∂‡ßÅ‡¶≠, N=neutral/‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ, B=bad/‡¶Ö‡¶∂‡ßÅ‡¶≠
const MUH_AUSPIC = ['B','B','G','B','G','G','G','G','G','G','G','B','G','G','G','G','B','N','G','G','B','G','G','G','G'];
const MUH_DESC = [
  '‡¶Ö‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§, ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú ‡¶¨‡¶∞‡ßç‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º',
  '‡¶Ö‡¶∂‡ßÅ‡¶≠, ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶¨‡¶∞‡ßç‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º',
  '‡¶Æ‡¶ø‡¶§‡ßç‡¶∞‡¶§‡¶æ ‡¶ì ‡¶∏‡¶π‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶™‡¶ø‡¶§‡ßÉ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§',
  '‡¶ß‡¶®‡¶≤‡¶æ‡¶≠ ‡¶ì ‡¶∏‡¶Æ‡ßç‡¶™‡¶¶ ‡¶Ö‡¶∞‡ßç‡¶ú‡¶®‡ßá ‡¶∂‡ßÅ‡¶≠',
  '‡¶ï‡ßÉ‡¶∑‡¶ø‡¶ï‡¶æ‡¶ú ‡¶ì ‡¶™‡¶∂‡ßÅ‡¶™‡¶æ‡¶≤‡¶®‡ßá ‡¶∂‡ßÅ‡¶≠',
  '‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶ì ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶ú‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶Æ',
  '‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶∂‡ßç‡¶∞‡ßá‡¶∑‡ßç‡¶† ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶¨‡¶π‡ßÅ‡¶Æ‡ßÅ‡¶ñ‡ßÄ ‡¶∂‡ßÅ‡¶≠ ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø',
  '‡¶∞‡¶æ‡¶ú‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø ‡¶ì ‡¶∏‡¶≠‡¶æ-‡¶∏‡¶Æ‡¶ø‡¶§‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø',
  '‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ì ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶≠',
  '‡¶Ö‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§, ‡¶¨‡¶∞‡ßç‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º',
  '‡¶ú‡¶≤‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø ‡¶ì ‡¶®‡ßå‡¶ï‡¶æ ‡¶ö‡¶æ‡¶≤‡¶®‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶≠',
  '‡¶∏‡¶Æ‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø ‡¶ì ‡¶Ü‡¶®‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶≠‡¶æ‡¶ó‡ßç‡¶Ø ‡¶ì ‡¶™‡ßç‡¶∞‡ßá‡¶Æ‡ßá ‡¶∂‡ßÅ‡¶≠',
  '‡¶∂‡¶ø‡¶¨ ‡¶™‡ßÇ‡¶ú‡¶æ ‡¶ì ‡¶Ü‡¶ß‡ßç‡¶Ø‡¶æ‡¶§‡ßç‡¶Æ‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡ßá ‡¶∂‡ßç‡¶∞‡ßá‡¶∑‡ßç‡¶†',
  '‡¶Ö‡¶∂‡ßÅ‡¶≠, ‡¶¨‡¶∞‡ßç‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º',
  '‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ ‚Äî ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®',
  '‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶ì ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶ì ‡¶®‡¶ø‡¶∞‡¶æ‡¶Æ‡¶Ø‡¶º‡ßá ‡¶∂‡ßç‡¶∞‡ßá‡¶∑‡ßç‡¶†',
  '‡¶™‡¶ø‡¶§‡ßÉ‡¶§‡¶∞‡ßç‡¶™‡¶£‡ßá‡¶∞ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶Ø‡¶ú‡ßç‡¶û ‡¶ì ‡¶π‡ßã‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø ‡¶ì ‡¶â‡¶¶‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡ßá‡¶∞ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶Ö‡¶∞‡ßç‡¶ú‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
  '‡¶Æ‡¶æ‡¶§‡ßÉ‡¶™‡ßÇ‡¶ú‡¶æ ‡¶ì ‡¶∏‡¶®‡ßç‡¶§‡¶æ‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡ßá ‡¶∂‡ßÅ‡¶≠'
];

// Rahu Kala times by weekday (traditional ‚Äî hours from sunrise)
// Sun=8th, Mon=2nd, Tue=7th, Wed=5th, Thu=6th, Fri=4th, Sat=3rd part
const RAHU_PART = [8,2,7,5,6,4,3]; // part number (1-8) from sunrise

// Yamaganda by weekday (1-8 from sunrise)
const YAMA_PART = [5,4,3,2,1,7,6];

// Gulika by weekday
const GULI_PART = [7,6,5,4,3,2,1];

function getMuhurtas(jd, bsMonth, weekday) {
  const sun = sunRiseSet(jd);
  const sun2 = sunRiseSet(jd + 1); // next day sunrise
  if (!sun.rise || !sun.set) return [];

  const riseH = sun.riseH;
  const setH  = sun.setH;
  const nextRiseH = sun2 ? sun2.riseH + 24 : riseH + 24;

  const dayDur   = setH - riseH;           // hours
  const nightDur = nextRiseH - setH;       // hours
  const muhDayDur   = dayDur / 15;         // 1 muhurta duration (day)
  const muhNightDur = nightDur / 15;       // 1 muhurta duration (night)

  // Rahu, Yama, Gulika (each = 1 muhurta duration, 1.5 hrs traditionally)
  const rahuStart = riseH + (RAHU_PART[weekday] - 1) * muhDayDur;
  const yamaStart = riseH + (YAMA_PART[weekday] - 1) * muhDayDur;
  const guliStart = riseH + (GULI_PART[weekday] - 1) * muhDayDur;

  function toHM(h) {
    const norm = ((h % 24) + 24) % 24;
    const hh = Math.floor(norm);
    const mm = Math.round((norm - hh) * 60);
    const mm2 = mm >= 60 ? 0 : mm;
    const hh2 = mm >= 60 ? hh + 1 : hh;
    return bn(hh2) + ':' + (mm2 < 10 ? '‡ß¶' + bn(mm2) : bn(mm2));
  }

  const mList = [];
  // Day muhurtas (1-15): Rudra...Aditi mapped to day hours
  for (let i = 0; i < 15; i++) {
    const s = riseH + i * muhDayDur;
    const e = s + muhDayDur;
    const isRahu = (Math.round(s * 10) === Math.round(rahuStart * 10));
    const isYama = (Math.round(s * 10) === Math.round(yamaStart * 10));
    const isGuli = (Math.round(s * 10) === Math.round(guliStart * 10));
    mList.push({
      num: i + 1, name: MUH_NAMES[i], auspic: MUH_AUSPIC[i],
      desc: MUH_DESC[i], start: toHM(s), end: toHM(e), startH: s,
      isRahu, isYama, isGuli, period: '‡¶¶‡¶ø‡¶®'
    });
  }
  // Night muhurtas (16-30): continuing cycle
  for (let i = 0; i < 10; i++) {
    const s = setH + i * muhNightDur;
    const e = s + muhNightDur;
    mList.push({
      num: i + 16, name: MUH_NAMES[i + 15], auspic: MUH_AUSPIC[i + 15],
      desc: MUH_DESC[i + 15], start: toHM(s), end: toHM(e), startH: s,
      isRahu: false, isYama: false, isGuli: false, period: '‡¶∞‡¶æ‡¶§'
    });
  }

  // Add Rahu Kala, Yamaganda, Gulika as special entries
  const rahuSE = { name:'‡¶∞‡¶æ‡¶π‡ßÅ ‡¶ï‡¶æ‡¶≤', auspic:'B', desc:'‡¶Ö‡¶∂‡ßÅ‡¶≠ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§ ‚Äî ‡¶∂‡ßÅ‡¶≠ ‡¶ï‡¶æ‡¶ú ‡¶¨‡¶∞‡ßç‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º',
    start: toHM(rahuStart), end: toHM(rahuStart + muhDayDur), startH: rahuStart, period:'‡¶¨‡¶ø‡¶∂‡ßá‡¶∑' };
  const yamaSE = { name:'‡¶Ø‡¶Æ‡¶ò‡¶£‡ßç‡¶ü', auspic:'B', desc:'‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶æ‡¶∞‡¶Æ‡ßç‡¶≠ ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß',
    start: toHM(yamaStart), end: toHM(yamaStart + muhDayDur), startH: yamaStart, period:'‡¶¨‡¶ø‡¶∂‡ßá‡¶∑' };
  const guliSE = { name:'‡¶ó‡ßÅ‡¶≤‡¶ø‡¶ï ‡¶ï‡¶æ‡¶≤', auspic:'B', desc:'‡¶∂‡ßÅ‡¶≠ ‡¶ï‡¶æ‡¶ú‡ßá ‡¶¨‡¶ø‡¶∞‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®',
    start: toHM(guliStart), end: toHM(guliStart + muhDayDur), startH: guliStart, period:'‡¶¨‡¶ø‡¶∂‡ßá‡¶∑' };

  // Brahma muhurta: 1.5 hrs before sunrise
  const brahmaStart = riseH - 1.5;
  const brahmaSE = { name:'‡¶¨‡ßç‡¶∞‡¶π‡ßç‡¶Æ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§', auspic:'G', desc:'‡¶ß‡ßç‡¶Ø‡¶æ‡¶®, ‡¶™‡ßÇ‡¶ú‡¶æ, ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶Ø‡¶º‡¶®‡ßá‡¶∞ ‡¶∂‡ßç‡¶∞‡ßá‡¶∑‡ßç‡¶† ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
    start: toHM(brahmaStart), end: toHM(riseH), startH: brahmaStart, period:'‡¶≠‡ßã‡¶∞' };

  // Abhijit muhurta: around solar noon (varies by weekday, best on most days)
  const abhijitStart = sun.transit - 0.4;
  const abhijitSE = { name:'‡¶Ö‡¶≠‡¶ø‡¶ú‡¶ø‡ßé ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§', auspic:'G', desc:'‡¶∏‡¶ï‡¶≤ ‡¶∂‡ßÅ‡¶≠ ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∂‡ßÅ‡¶≠',
    start: toHM(abhijitStart), end: toHM(abhijitStart + 0.8), startH: abhijitStart, period:'‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞' };

  // Vijaya muhurta: 3rd muhurta of afternoon
  const vijayaStart = sun.transit + muhDayDur;
  const vijayaSE = { name:'‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§', auspic:'G', desc:'‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶ì ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶æ‡¶∞‡¶Æ‡ßç‡¶≠‡ßá ‡¶∂‡ßÅ‡¶≠',
    start: toHM(vijayaStart), end: toHM(vijayaStart + muhDayDur), startH: vijayaStart, period:'‡¶¨‡¶ø‡¶ï‡ßá‡¶≤' };

  // Godhuli: ~30 min around sunset
  const godhuliStart = setH - 0.3;
  const godhuliSE = { name:'‡¶ó‡ßã‡¶ß‡ßÇ‡¶≤‡¶ø ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§', auspic:'G', desc:'‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶ì ‡¶™‡ßÇ‡¶ú‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∂‡ßÅ‡¶≠',
    start: toHM(godhuliStart), end: toHM(setH + 0.3), startH: godhuliStart, period:'‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ' };

  // Nishith: ~midnight
  const nishithStart = setH + nightDur / 2 - 0.4;
  const nishithSE = { name:'‡¶®‡¶ø‡¶∂‡ßÄ‡¶• ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§', auspic:'N', desc:'‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞ ‡¶ì ‡¶Ü‡¶ß‡ßç‡¶Ø‡¶æ‡¶§‡ßç‡¶Æ‡¶ø‡¶ï ‡¶∏‡¶æ‡¶ß‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§',
    start: toHM(nishithStart), end: toHM(nishithStart + 0.8), startH: nishithStart, period:'‡¶∞‡¶æ‡¶§' };

  return [brahmaSE, ...mList.slice(0,15), rahuSE, yamaSE, guliSE,
          abhijitSE, vijayaSE, godhuliSE, ...mList.slice(15), nishithSE];
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FESTIVALS DATABASE (fixed Bengali calendar dates)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const FESTS = [
  // ‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ (0)
  {m:0,d:1,name:'‡¶™‡¶π‡ßá‡¶≤‡¶æ ‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ ‚Äî ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶¨‡¶¨‡¶∞‡ßç‡¶∑',e:'üéä',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤ ‡¶∂‡ßã‡¶≠‡¶æ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ, ‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ‡ßÄ ‡¶Æ‡ßá‡¶≤‡¶æ, ‡¶π‡¶æ‡¶≤‡¶ñ‡¶æ‡¶§‡¶æ‡•§ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:0,d:1,name:'‡¶π‡¶æ‡¶≤‡¶ñ‡¶æ‡¶§‡¶æ',e:'üìí',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ‡¶Ø‡¶º‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ñ‡¶æ‡¶§‡¶æ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø‡¶¨‡¶æ‡¶π‡ßÄ ‡¶¶‡¶ø‡¶®‡•§'},
  {m:0,d:3,name:'‡¶Ö‡¶ï‡ßç‡¶∑‡¶Ø‡¶º ‡¶§‡ßÉ‡¶§‡ßÄ‡¶Ø‡¶º‡¶æ',e:'ü™ô',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∂‡ßÅ‡¶≠ ‡¶¶‡¶ø‡¶®‡•§ ‡¶∏‡ßã‡¶®‡¶æ ‡¶ï‡ßá‡¶®‡¶æ, ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π, ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ‡•§'},
  {m:0,d:11,name:'‡¶¨‡¶ø‡¶∂‡ßç‡¶¨ ‡¶¨‡¶á ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üìö',t:'tg',tl:'‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï',desc:'‡¶™‡¶æ‡¶†‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Ü‡¶ó‡ßç‡¶∞‡¶π ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶¨‡ßà‡¶∂‡ßç‡¶¨‡¶ø‡¶ï ‡¶¶‡¶ø‡¶¨‡¶∏‡•§'},
  {m:0,d:14,name:'‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'‚ò∏Ô∏è',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ó‡ßå‡¶§‡¶Æ ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ, ‡¶ú‡ßç‡¶û‡¶æ‡¶®‡¶≤‡¶æ‡¶≠ ‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶£ ‡¶¶‡¶ø‡¶¨‡¶∏‡•§'},
  {m:0,d:14,name:'‡¶™‡¶∂‡ßç‡¶ö‡¶ø‡¶Æ‡¶¨‡¶ô‡ßç‡¶ó ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üó∫Ô∏è',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶™‡¶∂‡ßç‡¶ö‡¶ø‡¶Æ‡¶¨‡¶ô‡ßç‡¶ó ‡¶∞‡¶æ‡¶ú‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ‡•§'},
  {m:0,d:25,name:'‡¶∞‡¶¨‡ßÄ‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ',e:'‚úçÔ∏è',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶ï‡¶¨‡¶ø ‡¶∞‡¶¨‡ßÄ‡¶®‡ßç‡¶¶‡ßç‡¶∞‡¶®‡¶æ‡¶• ‡¶†‡¶æ‡¶ï‡ßÅ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ (‡ß®‡ß´‡¶∂‡ßá ‡¶¨‡ßà‡¶∂‡¶æ‡¶ñ)‡•§'},
  // ‡¶ú‡ßç‡¶Ø‡ßà‡¶∑‡ßç‡¶† (1)
  {m:1,d:1,name:'‡¶ú‡¶æ‡¶Æ‡¶æ‡¶á ‡¶∑‡¶∑‡ßç‡¶†‡ßÄ',e:'üçΩÔ∏è',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶ú‡¶æ‡¶Æ‡¶æ‡¶á‡¶ï‡ßá ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶¶‡¶∞-‡¶Ü‡¶™‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡ßá‡¶∞ ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø‡¶¨‡¶æ‡¶π‡ßÄ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:1,d:11,name:'‡¶®‡¶ú‡¶∞‡ßÅ‡¶≤ ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ',e:'üéµ',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶ï‡¶¨‡¶ø ‡¶ï‡¶æ‡¶ú‡ßÄ ‡¶®‡¶ú‡¶∞‡ßÅ‡¶≤ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ‡•§'},
  {m:1,d:14,name:'‡¶ú‡ßç‡¶Ø‡ßà‡¶∑‡ßç‡¶† ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'üåï',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ‡¶Ø‡¶º ‡¶™‡ßÅ‡¶£‡ßç‡¶Ø‡¶∏‡ßç‡¶®‡¶æ‡¶® ‡¶ì ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:1,d:8,name:'‡¶∞‡¶•‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ',e:'üöÇ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶≠‡¶ó‡¶¨‡¶æ‡¶® ‡¶ú‡¶ó‡¶®‡ßç‡¶®‡¶æ‡¶•‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡¶æ‡¶≤ ‡¶∞‡¶• ‡¶ü‡¶æ‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶π‡ßã‡ßé‡¶∏‡¶¨‡•§'},
  // ‡¶Ü‡¶∑‡¶æ‡¶¢‡¶º (2)
  {m:2,d:1,name:'‡¶∞‡¶•‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ (‡¶Ü‡¶∑‡¶æ‡¶¢‡¶º)',e:'üé°',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∞‡¶•‡ßá ‡¶ú‡¶ó‡¶®‡ßç‡¶®‡¶æ‡¶•, ‡¶¨‡¶≤‡¶∞‡¶æ‡¶Æ ‡¶ì ‡¶∏‡ßÅ‡¶≠‡¶¶‡ßç‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶π‡¶æ‡¶∂‡ßã‡¶≠‡¶æ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡•§'},
  {m:2,d:9,name:'‡¶â‡¶≤‡ßç‡¶ü‡ßã ‡¶∞‡¶•‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ',e:'üîÑ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ó‡ßÅ‡¶£‡ßç‡¶°‡¶ø‡¶ö‡¶æ ‡¶Æ‡¶®‡ßç‡¶¶‡¶ø‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶•‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶¨‡¶∞‡ßç‡¶§‡¶®‡•§'},
  {m:2,d:14,name:'‡¶Ü‡¶∑‡¶æ‡¶¢‡¶º‡ßÄ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ / ‡¶ó‡ßÅ‡¶∞‡ßÅ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'üôè',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡¶æ ‡¶®‡¶ø‡¶¨‡ßá‡¶¶‡¶®‡•§ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶¨‡¶∞‡ßç‡¶∑‡¶æ‡¶¨‡¶æ‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡•§'},
  {m:2,d:15,name:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶∂‡ßã‡¶ï ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üñ§',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶¨‡¶ô‡ßç‡¶ó‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶∂‡ßá‡¶ñ ‡¶Æ‡ßÅ‡¶ú‡¶ø‡¶¨‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡¶æ‡¶π‡¶æ‡¶¶‡¶§ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ‡•§'},
  // ‡¶∂‡ßç‡¶∞‡¶æ‡¶¨‡¶£ (3)
  {m:3,d:1,name:'‡¶∂‡ßç‡¶∞‡¶æ‡¶¨‡¶£ ‡¶∂‡¶ø‡¶¨ ‡¶™‡ßÇ‡¶ú‡¶æ',e:'üî±',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∂‡ßç‡¶∞‡¶æ‡¶¨‡¶£ ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶∂‡¶ø‡¶¨‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:3,d:8,name:'‡¶®‡¶æ‡¶ó ‡¶™‡¶û‡ßç‡¶ö‡¶Æ‡ßÄ',e:'üêç',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡¶∞‡ßç‡¶™‡¶¶‡ßá‡¶¨‡¶§‡¶æ‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:3,d:14,name:'‡¶∞‡¶æ‡¶ñ‡ßÄ ‡¶¨‡¶®‡ßç‡¶ß‡¶®',e:'üéÄ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶≠‡¶æ‡¶á-‡¶¨‡ßã‡¶®‡ßá‡¶∞ ‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß‡¶®‡ßá‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:3,d:15,name:'‡¶ù‡ßÅ‡¶≤‡¶® ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'üé†',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∞‡¶æ‡¶ß‡¶æ‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡ßá‡¶∞ ‡¶ù‡ßÅ‡¶≤‡¶®‡ßá‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  // ‡¶≠‡¶æ‡¶¶‡ßç‡¶∞ (4)
  {m:4,d:3,name:'‡¶ó‡¶£‡ßá‡¶∂ ‡¶ö‡¶§‡ßÅ‡¶∞‡ßç‡¶•‡ßÄ',e:'üêò',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¨‡¶æ‡¶ß‡¶æ ‡¶¶‡ßÇ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶¶‡ßá‡¶¨‡¶§‡¶æ ‡¶ó‡¶£‡ßá‡¶∂‡ßá‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:4,d:4,name:'‡¶ú‡¶®‡ßç‡¶Æ‡¶æ‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ',e:'ü¶ö',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∂‡ßç‡¶∞‡ßÄ‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡•§ ‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§‡ßá ‡¶™‡ßÇ‡¶ú‡¶æ, ‡¶â‡¶™‡¶¨‡¶æ‡¶∏‡•§'},
  {m:4,d:5,name:'‡¶®‡¶®‡ßç‡¶¶‡ßã‡ßé‡¶∏‡¶¨',e:'üéâ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡¶ú‡¶®‡ßç‡¶Æ‡ßá‡¶∞ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶®‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶®‡¶®‡ßç‡¶¶ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:4,d:13,name:'‡¶≠‡¶æ‡¶¶‡ßç‡¶∞ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§‡¶ø',e:'üåæ',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶≠‡¶æ‡¶¶‡ßç‡¶∞ ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶¶‡¶ø‡¶®‡•§ ‡¶™‡¶ø‡¶†‡¶æ-‡¶™‡¶æ‡¶Ø‡¶º‡ßá‡¶∏ ‡¶∞‡¶æ‡¶®‡ßç‡¶®‡¶æ‡•§'},
  {m:4,d:25,name:'‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶ï‡¶∞‡ßç‡¶Æ‡¶æ ‡¶™‡ßÇ‡¶ú‡¶æ',e:'‚öôÔ∏è',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∂‡¶ø‡¶≤‡ßç‡¶™-‡¶ï‡¶æ‡¶∞‡¶ø‡¶ó‡¶∞‡¶¶‡ßá‡¶∞ ‡¶¶‡ßá‡¶¨‡¶§‡¶æ‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  // ‡¶Ü‡¶∂‡ßç‡¶¨‡¶ø‡¶® (5)
  {m:5,d:1,name:'‡¶Æ‡¶π‡¶æ‡¶≤‡¶Ø‡¶º‡¶æ',e:'ü™î',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¶‡ßá‡¶¨‡ßÄ‡¶™‡¶ï‡ßç‡¶∑‡ßá‡¶∞ ‡¶∏‡ßÇ‡¶ö‡¶®‡¶æ‡•§ ‡¶™‡¶ø‡¶§‡ßÉ‡¶§‡¶∞‡ßç‡¶™‡¶£‡•§ ‡¶Æ‡¶π‡¶ø‡¶∑‡¶æ‡¶∏‡ßÅ‡¶∞‡¶Æ‡¶∞‡ßç‡¶¶‡¶ø‡¶®‡ßÄ‡•§'},
  {m:5,d:1,name:'‡¶∂‡¶æ‡¶∞‡¶¶‡ßÄ‡¶Ø‡¶º‡¶æ ‡¶®‡¶¨‡¶∞‡¶æ‡¶§‡ßç‡¶∞‡¶ø',e:'üå∫',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶®‡¶Ø‡¶º ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶¶‡ßá‡¶¨‡ßÄ ‡¶Ü‡¶∞‡¶æ‡¶ß‡¶®‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡•§'},
  {m:5,d:6,name:'‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶∑‡¶∑‡ßç‡¶†‡ßÄ',e:'üå∫',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¶‡ßá‡¶¨‡ßÄ‡¶∞ ‡¶¨‡ßã‡¶ß‡¶®‡•§ ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶™‡ßÇ‡¶ú‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡•§'},
  {m:5,d:7,name:'‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶∏‡¶™‡ßç‡¶§‡¶Æ‡ßÄ',e:'üèµÔ∏è',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ï‡¶≤‡¶æ‡¶¨‡¶â ‡¶∏‡ßç‡¶®‡¶æ‡¶® ‡¶ì ‡¶®‡¶¨‡¶™‡¶§‡ßç‡¶∞‡¶ø‡¶ï‡¶æ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:5,d:8,name:'‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶Æ‡¶π‡¶æ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ',e:'üî•',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡¶®‡ßç‡¶ß‡¶ø‡¶™‡ßÇ‡¶ú‡¶æ ‡¶ì ‡¶ï‡ßÅ‡¶Æ‡¶æ‡¶∞‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:5,d:9,name:'‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶Æ‡¶π‡¶æ‡¶®‡¶¨‡¶Æ‡ßÄ',e:'üå∏',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶®‡¶¨‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ ‡¶ì ‡¶π‡ßã‡¶Æ‡•§'},
  {m:5,d:10,name:'‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º‡¶æ ‡¶¶‡¶∂‡¶Æ‡ßÄ',e:'üéÜ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Æ‡¶æ ‡¶¨‡¶ø‡¶∏‡¶∞‡ßç‡¶ú‡¶®‡•§ ‡¶∏‡¶ø‡¶Å‡¶¶‡ßÅ‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ‡•§'},
  {m:5,d:14,name:'‡¶ï‡ßã‡¶ú‡¶æ‡¶ó‡¶∞‡ßÄ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ',e:'üåù',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶Ü‡¶∂‡ßç‡¶¨‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ‡¶Ø‡¶º ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:5,d:18,name:'‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üèÜ',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶Ø‡ßÅ‡¶¶‡ßç‡¶ß‡ßá ‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º (‡ßß‡ß¨ ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞ ‡ßß‡ßØ‡ß≠‡ßß)‡•§'},
  // ‡¶ï‡¶æ‡¶∞‡ßç‡¶§‡¶ø‡¶ï (6)
  {m:6,d:1,name:'‡¶ï‡ßÅ‡¶Æ‡¶æ‡¶∞ ‡¶∑‡¶∑‡ßç‡¶†‡ßÄ',e:'üåø',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡¶®‡ßç‡¶§‡¶æ‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤ ‡¶ï‡¶æ‡¶Æ‡¶®‡¶æ‡¶Ø‡¶º ‡¶â‡¶™‡¶¨‡¶æ‡¶∏‡•§'},
  {m:6,d:13,name:'‡¶ß‡¶®‡¶§‡ßá‡¶∞‡¶æ‡¶∏',e:'üíõ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡ßã‡¶®‡¶æ-‡¶∞‡ßÅ‡¶™‡¶æ ‡¶ï‡ßá‡¶®‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶¶‡¶ø‡¶®‡•§'},
  {m:6,d:14,name:'‡¶ï‡¶æ‡¶≤‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ / ‡¶¶‡ßÄ‡¶™‡¶æ‡¶¨‡¶≤‡¶ø',e:'üïØÔ∏è',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ï‡¶æ‡¶≤‡ßÄ ‡¶Æ‡¶æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§ ‡¶Ü‡¶≤‡ßã‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:6,d:15,name:'‡¶≠‡¶æ‡¶á ‡¶´‡ßã‡¶Å‡¶ü‡¶æ',e:'ü§ù',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶≠‡¶æ‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ï‡¶™‡¶æ‡¶≤‡ßá ‡¶´‡ßã‡¶Å‡¶ü‡¶æ‡•§ ‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò‡¶æ‡¶Ø‡¶º‡ßÅ ‡¶ï‡¶æ‡¶Æ‡¶®‡¶æ‡•§'},
  {m:6,d:16,name:'‡¶õ‡¶ü ‡¶™‡ßÇ‡¶ú‡¶æ',e:'‚òÄÔ∏è',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡¶¶‡ßá‡¶¨‡¶§‡¶æ‡¶∞ ‡¶Ü‡¶∞‡¶æ‡¶ß‡¶®‡¶æ‡•§'},
  {m:6,d:28,name:'‡¶ï‡¶æ‡¶∞‡ßç‡¶§‡¶ø‡¶ï ‡¶™‡ßÇ‡¶ú‡¶æ',e:'ü¶ö',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∏‡ßá‡¶®‡¶æ‡¶™‡¶§‡¶ø ‡¶¶‡ßá‡¶¨‡¶§‡¶æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶§‡¶ø‡¶ï‡ßá‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§'},
  {m:6,d:30,name:'‡¶∞‡¶æ‡¶∏ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'üåï',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡ßá‡¶∞ ‡¶∞‡¶æ‡¶∏‡¶≤‡ßÄ‡¶≤‡¶æ‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  // ‡¶Ö‡¶ó‡ßç‡¶∞‡¶π‡¶æ‡¶Ø‡¶º‡¶£ (7)
  {m:7,d:1,name:'‡¶®‡¶¨‡¶æ‡¶®‡ßç‡¶® ‡¶â‡ßé‡¶∏‡¶¨',e:'üåæ',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶®‡¶§‡ßÅ‡¶® ‡¶ß‡¶æ‡¶® ‡¶ì‡¶†‡¶æ‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§ ‡¶™‡¶ø‡¶†‡¶æ-‡¶™‡¶æ‡¶Ø‡¶º‡ßá‡¶∏‡•§'},
  {m:7,d:10,name:'‡¶ó‡ßÄ‡¶§‡¶æ ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ',e:'üìñ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶≠‡¶ó‡¶¨‡¶¶‡ßç‡¶ó‡ßÄ‡¶§‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶¨‡¶ö‡¶® ‡¶¶‡¶ø‡¶¨‡¶∏‡•§'},
  {m:7,d:19,name:'‡¶∏‡¶Ç‡¶¨‡¶ø‡¶ß‡¶æ‡¶® ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üìú',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶¨‡¶ø‡¶ß‡¶æ‡¶® ‡¶ó‡ßÉ‡¶π‡ßÄ‡¶§ (‡ß™ ‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞ ‡ßß‡ßØ‡ß≠‡ß®)‡•§'},
  // ‡¶™‡ßå‡¶∑ (8)
  {m:8,d:1,name:'‡¶™‡ßå‡¶∑ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§‡¶ø',e:'üçÆ',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶™‡ßå‡¶∑‡ßá‡¶∞ ‡¶™‡¶ø‡¶†‡¶æ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:8,d:14,name:'‡¶™‡ßå‡¶∑ ‡¶™‡¶æ‡¶∞‡ßç‡¶¨‡¶£',e:'üéë',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶®‡¶§‡ßÅ‡¶® ‡¶ó‡ßÅ‡¶°‡¶º ‡¶ì ‡¶ö‡¶æ‡¶≤‡ßá‡¶∞ ‡¶™‡¶ø‡¶†‡¶æ‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:8,d:25,name:'‡¶¨‡¶°‡¶º‡¶¶‡¶ø‡¶® ‚Äî ‡¶ï‡ßç‡¶∞‡¶ø‡¶∏‡¶Æ‡¶æ‡¶∏',e:'üéÑ',t:'tc',tl:'‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶®',desc:'‡¶Ø‡¶ø‡¶∂‡ßÅ ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡•§'},
  // ‡¶Æ‡¶æ‡¶ò (9)
  {m:9,d:1,name:'‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ',e:'üìö',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶¶‡ßá‡¶¨‡ßÄ‡¶∞ ‡¶™‡ßÇ‡¶ú‡¶æ‡•§ ‡¶õ‡¶æ‡¶§‡ßç‡¶∞‡¶õ‡¶æ‡¶§‡ßç‡¶∞‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
  {m:9,d:5,name:'‡¶¨‡¶∏‡¶®‡ßç‡¶§‡¶™‡¶û‡ßç‡¶ö‡¶Æ‡ßÄ',e:'üåø',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¨‡¶∏‡¶®‡ßç‡¶§‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠ ‡¶∏‡ßÇ‡¶ö‡¶®‡¶æ‡•§'},
  {m:9,d:15,name:'‡¶Æ‡¶æ‡¶ò ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ',e:'üåï',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶ó‡¶ô‡ßç‡¶ó‡¶æ‡¶∏‡ßç‡¶®‡¶æ‡¶® ‡¶ì ‡¶¶‡¶æ‡¶®‡•§'},
  {m:9,d:21,name:'‡¶è‡¶ï‡ßÅ‡¶∂‡ßá ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø ‚Äî ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üåπ',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶≠‡¶æ‡¶∑‡¶æ ‡¶∂‡¶π‡¶ø‡¶¶‡¶¶‡ßá‡¶∞ ‡¶∏‡ßç‡¶Æ‡¶∞‡¶£‡•§ ‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶§‡ßÉ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶¶‡¶ø‡¶¨‡¶∏‡•§'},
  {m:9,d:28,name:'‡¶Æ‡¶π‡¶æ ‡¶∂‡¶ø‡¶¨‡¶∞‡¶æ‡¶§‡ßç‡¶∞‡¶ø',e:'üî±',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∂‡¶ø‡¶¨‡ßá‡¶∞ ‡¶Æ‡¶π‡¶æ‡¶∞‡¶æ‡¶§‡ßç‡¶∞‡¶ø‡•§'},
  // ‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶® (10)
  {m:10,d:1,name:'‡¶™‡¶π‡ßá‡¶≤‡¶æ ‡¶´‡¶æ‡¶≤‡ßç‡¶ó‡ßÅ‡¶® ‚Äî ‡¶¨‡¶∏‡¶®‡ßç‡¶§ ‡¶â‡ßé‡¶∏‡¶¨',e:'üå∏',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶¨‡¶∏‡¶®‡ßç‡¶§ ‡¶â‡¶¶‡¶Ø‡¶æ‡¶™‡¶®‡•§ ‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶∂‡¶æ‡¶°‡¶º‡¶ø, ‡¶´‡ßÅ‡¶≤‡ßá‡¶∞ ‡¶Æ‡ßá‡¶≤‡¶æ‡•§'},
  {m:10,d:6,name:'‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï ‡¶®‡¶æ‡¶∞‡ßÄ ‡¶¶‡¶ø‡¶¨‡¶∏',e:'‚ôÄÔ∏è',t:'tg',tl:'‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï',desc:'‡¶®‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶¨‡¶∏‡•§'},
  {m:10,d:14,name:'‡¶¶‡ßã‡¶≤ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶ø‡¶Æ‡¶æ / ‡¶π‡ßã‡¶≤‡¶ø',e:'üé®',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∞‡¶ô‡ßá‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨‡•§ ‡¶Ü‡¶¨‡¶ø‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ‡•§'},
  {m:10,d:14,name:'‡¶ö‡ßà‡¶§‡¶®‡ßç‡¶Ø ‡¶Æ‡¶π‡¶æ‡¶™‡ßç‡¶∞‡¶≠‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶§‡¶ø‡¶•‡¶ø',e:'üôè',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶¨‡ßà‡¶∑‡ßç‡¶£‡¶¨ ‡¶Æ‡¶π‡¶æ‡¶™‡ßÅ‡¶∞‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ‡•§'},
  {m:10,d:26,name:'‡¶∏‡ßç‡¶¨‡¶æ‡¶ß‡ßÄ‡¶®‡¶§‡¶æ ‡¶¶‡¶ø‡¶¨‡¶∏',e:'üáßüá©',t:'tn',tl:'‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º',desc:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ß‡ßÄ‡¶®‡¶§‡¶æ ‡¶ò‡ßã‡¶∑‡¶£‡¶æ (‡ß®‡ß¨ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö ‡ßß‡ßØ‡ß≠‡ßß)‡•§'},
  // ‡¶ö‡ßà‡¶§‡ßç‡¶∞ (11)
  {m:11,d:3,name:'‡¶∞‡¶æ‡¶Æ‡¶®‡¶¨‡¶Æ‡ßÄ',e:'üèπ',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶≠‡¶ó‡¶¨‡¶æ‡¶® ‡¶∞‡¶æ‡¶Æ‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶§‡¶ø‡¶•‡¶ø‡•§'},
  {m:11,d:10,name:'‡¶π‡¶®‡ßÅ‡¶Æ‡¶æ‡¶® ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ',e:'üêí',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶π‡¶®‡ßÅ‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶ú‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßÄ‡•§'},
  {m:11,d:15,name:'‡¶ö‡¶°‡¶º‡¶ï ‡¶™‡ßÇ‡¶ú‡¶æ / ‡¶ó‡¶æ‡¶ú‡¶®',e:'‚ö°',t:'th',tl:'‡¶π‡¶ø‡¶®‡ßç‡¶¶‡ßÅ',desc:'‡¶∂‡¶ø‡¶¨‡ßá‡¶∞ ‡¶ö‡¶°‡¶º‡¶ï ‡¶â‡ßé‡¶∏‡¶¨‡•§ ‡¶ó‡¶æ‡¶ú‡¶® ‡¶∂‡ßã‡¶≠‡¶æ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡•§'},
  {m:11,d:15,name:'‡¶ö‡ßà‡¶§‡ßç‡¶∞ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§‡¶ø',e:'üéã',t:'tb2',tl:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',desc:'‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶¨‡¶õ‡¶∞ ‡¶¨‡¶ø‡¶¶‡¶æ‡¶Ø‡¶º‡•§ ‡¶Æ‡ßá‡¶≤‡¶æ ‡¶ì ‡¶â‡ßé‡¶∏‡¶¨‡•§'},
];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let SEL = { y: 1431, m: 0, d: 1 };
let TODAY_BS = { y: 1431, m: 0, d: 1 };

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MONTH GRID
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderGrid() {
  const { y: bY, m: bM } = SEL;
  document.getElementById('mname').textContent = BN_M[bM];
  const g1 = bengaliToGregorian(bY, bM, 1);
  const ceStart = g1.y;
  document.getElementById('myear').textContent =
    `${bn(bY)} ‡¶¨‡¶ô‡ßç‡¶ó‡¶æ‡¶¨‡ßç‡¶¶ ‚Ä¢ ${bn(ceStart)} ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶`;

  // Festival map
  const fmap = {};
  FESTS.filter(f => f.m === bM).forEach(f => {
    if (!fmap[f.d]) fmap[f.d] = [];
    fmap[f.d].push(f);
  });

  // First day weekday
  const firstDate = new Date(g1.y, g1.m - 1, g1.d);
  const startWD = firstDate.getDay(); // 0=Sun

  const totalDays = getBSMonthDays(bY, bM);
  const grid = document.getElementById('cgrid');
  grid.innerHTML = '';

  // Empty cells
  for (let i = 0; i < startWD; i++) {
    const c = document.createElement('div');
    c.className = 'cc emp';
    grid.appendChild(c);
  }

  for (let day = 1; day <= totalDays; day++) {
    const g = bengaliToGregorian(bY, bM, day);
    const jd = g.jd;
    const gDate = new Date(g.y, g.m - 1, g.d);
    const wd = gDate.getDay();
    const tithi = calcTithi(jd);
    const fests = fmap[day] || [];
    const isToday = bY === TODAY_BS.y && bM === TODAY_BS.m && day === TODAY_BS.d;
    const isSel = day === SEL.d;

    const c = document.createElement('div');
    let cls = 'cc';
    if (wd === 0) cls += ' sun';
    if (wd === 6) cls += ' sat';
    if (isToday) cls += ' tod';
    if (isSel) cls += ' sel';
    c.className = cls;
    c.onclick = () => { SEL.d = day; renderAll(); };

    if (isToday) {
      const lbl = document.createElement('span');
      lbl.className = 'tod-lbl'; lbl.textContent = '‡¶Ü‡¶ú';
      c.appendChild(lbl);
    }

    const dn = document.createElement('span');
    dn.className = 'dn'; dn.textContent = bn(day); c.appendChild(dn);

    const den = document.createElement('span');
    den.className = 'den'; den.textContent = g.d; c.appendChild(den);

    if (fests.length > 0) {
      const fl = document.createElement('div');
      fl.className = 'fl';
      fl.textContent = fests[0].e + ' ' + fests[0].name.split('‚Äî')[0].trim();
      c.appendChild(fl);
    }

    const dots = document.createElement('div');
    dots.className = 'dots';
    // Moon dot at full/new moon
    if (tithi.num === 14 || tithi.num === 29) {
      const d2 = document.createElement('div');
      d2.className = 'dot dm';
      d2.title = TITHIS_30[tithi.num];
      dots.appendChild(d2);
    }
    fests.slice(0, 5).forEach(() => {
      const d2 = document.createElement('div');
      d2.className = 'dot df';
      dots.appendChild(d2);
    });
    c.appendChild(dots);
    grid.appendChild(c);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DAY DETAIL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderDayDetail() {
  const { y: bY, m: bM, d: bD } = SEL;
  const g = bengaliToGregorian(bY, bM, bD);
  const jd = g.jd;
  const gDate = new Date(g.y, g.m - 1, g.d);
  const wd = gDate.getDay();

  const tithi = calcTithi(jd);
  const nak = calcNakshatra(jd);
  const yoga = calcYoga(jd);
  const kar = calcKarana(jd);
  const sun = sunRiseSet(jd);
  const hijri = gregorianToHijri(g.y, g.m, g.d);

  const tithiName = TITHIS_30[tithi.num];
  const paksha = tithi.num < 15 ? '‡¶∂‡ßÅ‡¶ï‡ßç‡¶≤‡¶™‡¶ï‡ßç‡¶∑' : '‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡¶™‡¶ï‡ßç‡¶∑';
  const moonPhase = MOON_P[Math.floor(tithi.num / 30 * 8) % 8];
  const ritu = RITUS[Math.floor(bM / 2)];
  const ayana = bM >= 3 && bM <= 8 ? '‡¶¶‡¶ï‡ßç‡¶∑‡¶ø‡¶£‡¶æ‡¶Ø‡¶º‡¶£' : '‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶Ø‡¶º‡¶£';

  // Festivals for this day
  const fests = FESTS.filter(f => f.m === bM && f.d === bD);
  // Upcoming
  const upcoming = [];
  for (let delta = 1; delta <= 30 && upcoming.length < 5; delta++) {
    let nm = bM, nd = bD + delta;
    while (nd > getBSMonthDays(bY, nm)) { nd -= getBSMonthDays(bY, nm); nm = (nm + 1) % 12; }
    FESTS.filter(f => f.m === nm && f.d === nd)
         .forEach(f => upcoming.push({ ...f, offset: delta, nm, nd }));
  }
  const upUniq = upcoming.filter((v, i, a) => a.findIndex(x => x.name === v.name) === i).slice(0, 4);

  const panel = document.getElementById('ddet');
  panel.innerHTML = `
    <div class="ddet-hdr">
      <div class="dbn">${bn(bD)}</div>
      <div class="dinfo">
        <div class="dwd">${BN_WD[wd]}, ${BN_M[bM]} ${bn(bY)}</div>
        <div class="dsub">${g.d} ${ENG_M[g.m - 1]} ${g.y}</div>
        <div class="dsub">${paksha} ‚Ä¢ ${tithiName} ‡¶§‡¶ø‡¶•‡¶ø</div>
        <div class="dsub">${ritu} ‡¶ã‡¶§‡ßÅ ‚Ä¢ ${ayana}</div>
      </div>
      <div class="dmoon">${moonPhase}</div>
    </div>
    <div class="dbody">
      <div class="dr"><span class="dk">‡¶§‡¶ø‡¶•‡¶ø</span><span class="dv gold">${tithiName} (${paksha})</span></div>
      <div class="dr"><span class="dk">‡¶§‡¶ø‡¶•‡¶ø ‡¶ï‡ßç‡¶∞‡¶Æ‡¶æ‡¶ô‡ßç‡¶ï</span><span class="dv">${bn(tithi.num + 1)}/‡ß©‡ß¶</span></div>
      <div class="dr"><span class="dk">‡¶®‡¶ï‡ßç‡¶∑‡¶§‡ßç‡¶∞</span><span class="dv">${nak.name}</span></div>
      <div class="dr"><span class="dk">‡¶Ø‡ßã‡¶ó</span><span class="dv">${yoga.name}</span></div>
      <div class="dr"><span class="dk">‡¶ï‡¶∞‡¶£</span><span class="dv">${kar.name}</span></div>
      <div class="dr"><span class="dk">‡¶ã‡¶§‡ßÅ / ‡¶Ö‡¶Ø‡¶º‡¶®</span><span class="dv purp">${ritu} ‡¶ã‡¶§‡ßÅ ‚Ä¢ ${ayana}</span></div>
      <div class="dr"><span class="dk">‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡ßç‡¶∞‡¶æ‡¶ò‡¶ø‡¶Æ‡¶æ</span><span class="dv">${bnf(tithi.slon, 2)}¬∞</span></div>
      <div class="dr"><span class="dk">‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßá‡¶∞ ‡¶¶‡ßç‡¶∞‡¶æ‡¶ò‡¶ø‡¶Æ‡¶æ</span><span class="dv">${bnf(tithi.mlon, 2)}¬∞</span></div>
      <div class="dr"><span class="dk">‡¶π‡¶ø‡¶ú‡¶∞‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</span><span class="dv purp">${bn(hijri.d)} ${HI_M[hijri.m - 1]} ${bn(hijri.y)}</span></div>
      <div class="dr"><span class="dk">‡¶∂‡¶ï‡¶æ‡¶¨‡ßç‡¶¶</span><span class="dv">${bn(bY - 421)} ‡¶∂‡¶ï‡¶æ‡¶¨‡ßç‡¶¶</span></div>
      <div class="dr"><span class="dk">‡¶ú‡ßÅ‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶® ‡¶¶‡¶ø‡¶®</span><span class="dv blue">${bn(jd)}</span></div>
      <div class="sunrow">
        <div class="sunbox"><div class="si">üåÖ</div><div class="sl">‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßã‡¶¶‡¶Ø‡¶º</div><div class="sv">${sun.rise || '‡¶Ö‡¶ú‡ßç‡¶û‡¶æ‡¶§'}</div></div>
        <div class="sunbox"><div class="si">üåá</div><div class="sl">‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡¶æ‡¶∏‡ßç‡¶§</div><div class="sv">${sun.set || '‡¶Ö‡¶ú‡ßç‡¶û‡¶æ‡¶§'}</div></div>
      </div>
      ${fests.length ? `
      <div class="fbox">
        <div class="fbox-t">üéä ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶â‡ßé‡¶∏‡¶¨ ‡¶ì ‡¶™‡¶æ‡¶∞‡ßç‡¶¨‡¶£</div>
        ${fests.map(f => `
          <div class="fitem">
            <span class="femoji">${f.e}</span>
            <div style="flex:1"><div class="fname">${f.name}</div><div class="fdesc">${f.desc}</div></div>
            <span class="ftag ${f.t}">${f.tl}</span>
          </div>`).join('')}
      </div>` : `<div style="text-align:center;color:var(--text2);font-size:.75rem;padding:.7rem 0;margin-top:.5rem">‡¶Ü‡¶ú ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶â‡ßé‡¶∏‡¶¨ ‡¶®‡ßá‡¶á</div>`}
      ${upUniq.length ? `
      <div class="upbox">
        <div class="up-t">üìÖ ‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶â‡ßé‡¶∏‡¶¨</div>
        ${upUniq.map(f => `
          <div class="upitem" onclick="jumpTo(${f.nm},${f.nd})">
            <span class="ue">${f.e}</span>
            <div style="flex:1"><div class="un">${f.name}</div><div class="ud">${BN_M[f.nm]} ${bn(f.nd)}</div></div>
            <span class="uo">${bn(f.offset)} ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞‡ßá ‚ñ∂</span>
          </div>`).join('')}
      </div>` : ''}
    </div>`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PANCHANG
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderPanchang() {
  const { y: bY, m: bM, d: bD } = SEL;
  const g = bengaliToGregorian(bY, bM, bD);
  const jd = g.jd;
  const gDate = new Date(g.y, g.m - 1, g.d);
  const wd = gDate.getDay();
  const tithi = calcTithi(jd);
  const nak = calcNakshatra(jd);
  const yoga = calcYoga(jd);
  const kar = calcKarana(jd);
  const ritu = RITUS[Math.floor(bM / 2)];
  const ayana = bM >= 3 && bM <= 8 ? '‡¶¶‡¶ï‡ßç‡¶∑‡¶ø‡¶£‡¶æ‡¶Ø‡¶º‡¶£' : '‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶Ø‡¶º‡¶£';
  const hijri = gregorianToHijri(g.y, g.m, g.d);

  document.getElementById('ptitle').textContent = `‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶ô‡ßç‡¶ó ‚Äî ${BN_M[bM]} ${bn(bD)}, ${bn(bY)}`;
  document.getElementById('pgrid').innerHTML = [
    { k: '‡¶§‡¶ø‡¶•‡¶ø', v: TITHIS_30[tithi.num] },
    { k: '‡¶™‡¶ï‡ßç‡¶∑', v: tithi.num < 15 ? '‡¶∂‡ßÅ‡¶ï‡ßç‡¶≤‡¶™‡¶ï‡ßç‡¶∑' : '‡¶ï‡ßÉ‡¶∑‡ßç‡¶£‡¶™‡¶ï‡ßç‡¶∑' },
    { k: '‡¶®‡¶ï‡ßç‡¶∑‡¶§‡ßç‡¶∞', v: nak.name },
    { k: '‡¶Ø‡ßã‡¶ó', v: yoga.name },
    { k: '‡¶ï‡¶∞‡¶£', v: kar.name },
    { k: '‡¶¨‡¶æ‡¶∞', v: BN_WD[wd] },
  ].map(p => `<div class="pi"><span class="pik">${p.k}</span><span class="piv">${p.v}</span></div>`).join('');

  document.getElementById('vdt').innerHTML = [
    { k: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ', v: `${bn(bD)} ${BN_M[bM]}, ${bn(bY)}`, c: 'gold' },
    { k: '‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ', v: `${g.d} ${ENG_M[g.m - 1]} ${g.y}`, c: '' },
    { k: '‡¶π‡¶ø‡¶ú‡¶∞‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ', v: `${bn(hijri.d)} ${HI_M[hijri.m - 1]} ${bn(hijri.y)}`, c: 'purp' },
    { k: '‡¶∂‡¶ï‡¶æ‡¶¨‡ßç‡¶¶', v: `${bn(bY - 421)} ‡¶∂‡¶ï‡¶æ‡¶¨‡ßç‡¶¶`, c: '' },
    { k: '‡¶¨‡¶æ‡¶∞', v: BN_WD[wd], c: 'gold' },
    { k: '‡¶ã‡¶§‡ßÅ', v: ritu + ' ‡¶ã‡¶§‡ßÅ', c: '' },
    { k: '‡¶Ö‡¶Ø‡¶º‡¶®', v: ayana, c: '' },
    { k: '‡¶ú‡ßÅ‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶® ‡¶¶‡¶ø‡¶®', v: bn(jd), c: 'blue' },
  ].map(r => `<div class="vr"><span class="vrk">${r.k}</span><span class="vrv ${r.c}">${r.v}</span></div>`).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MUHURTAS FOR SELECTED DAY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderMuhurtas() {
  const { y: bY, m: bM, d: bD } = SEL;
  const g = bengaliToGregorian(bY, bM, bD);
  const jd = g.jd;
  const gDate = new Date(g.y, g.m - 1, g.d);
  const wd = gDate.getDay();

  const muhs = getMuhurtas(jd, bM, wd);
  const grid = document.getElementById('muhGrid');
  grid.innerHTML = muhs.map(m => {
    const cls = m.auspic === 'G' ? 'mg' : m.auspic === 'B' ? 'mb' : 'mn';
    const lbl = m.auspic === 'G' ? '‡¶∂‡ßÅ‡¶≠' : m.auspic === 'B' ? '‡¶Ö‡¶∂‡ßÅ‡¶≠' : '‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ';
    const periodColor = m.period === '‡¶¨‡¶ø‡¶∂‡ßá‡¶∑' ? ' style="color:var(--bad)"' : '';
    return `<div class="muh-item">
      <div class="muh-left">
        <div class="muh-name">${m.name} <small style="font-size:.6rem;color:var(--text2)">(${m.period})</small></div>
        <div class="muh-desc">${m.desc}</div>
        <div class="muh-time">‚è± ${m.start} ‚Äì ${m.end}</div>
      </div>
      <span class="mbadge ${cls}">${lbl}</span>
    </div>`;
  }).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FESTIVALS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let activeFM = -1;
function buildTabs() {
  document.getElementById('mtabs').innerHTML =
    `<button class="mtab on" onclick="showFM(-1,this)">‡¶∏‡¶¨ ‡¶Æ‡¶æ‡¶∏</button>` +
    BN_M.map((m, i) => `<button class="mtab" onclick="showFM(${i},this)">${m}</button>`).join('');
}
function showFM(idx, btn) {
  activeFM = idx;
  document.querySelectorAll('.mtab').forEach(b => b.classList.remove('on'));
  btn.classList.add('on');
  filterF(document.getElementById('fsrch').value);
}
function filterF(q = '') {
  const ql = q.toLowerCase().trim();
  const cont = document.getElementById('fcont');
  cont.innerHTML = '';
  const groups = {};
  FESTS.forEach(f => {
    if (activeFM !== -1 && f.m !== activeFM) return;
    if (ql && !f.name.toLowerCase().includes(ql) && !f.desc.toLowerCase().includes(ql) && !f.tl.includes(ql)) return;
    if (!groups[f.m]) groups[f.m] = [];
    groups[f.m].push(f);
  });
  let total = 0;
  Object.keys(groups).sort((a, b) => +a - +b).forEach(mi => {
    const fests = groups[mi]; total += fests.length;
    const sec = document.createElement('div');
    sec.innerHTML = `
      <div class="fmhdr" onclick="toggleAcc(this)">
        <span class="fmic">${M_ICO[mi]}</span>
        <span class="fmn">${BN_M[mi]}</span>
        <span class="fmc">${fests.length}</span>
        <span class="fmar">‚ñº</span>
      </div>
      <div class="fmbody">
        ${fests.map(f => `
          <div class="fi" onclick="jumpTo(${f.m},${f.d})">
            <div class="fidc"><div class="fid">${bn(f.d)}</div><div class="fie">${f.e}</div></div>
            <div><div class="fin">${f.name}</div><div class="fis">${f.desc.length > 55 ? f.desc.slice(0, 55) + '‚Ä¶' : f.desc}</div></div>
            <span class="ftag ${f.t}">${f.tl}</span>
          </div>`).join('')}
      </div>`;
    cont.appendChild(sec);
  });
  if (!total) {
    const d = document.createElement('div');
    d.style.cssText = 'padding:1.2rem;text-align:center;color:var(--text2);font-size:.78rem';
    d.textContent = '‡¶ï‡ßã‡¶®‡ßã ‡¶â‡ßé‡¶∏‡¶¨ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø';
    cont.appendChild(d);
  }
}
function toggleAcc(hdr) {
  const body = hdr.nextElementSibling;
  const arr = hdr.querySelector('.fmar');
  body.classList.toggle('hidden');
  arr.style.transform = body.classList.contains('hidden') ? 'rotate(-90deg)' : '';
}
function jumpTo(month, day) {
  SEL.m = month; SEL.d = day;
  document.getElementById('inMonth').value = month;
  renderAll();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NOW BADGE (real-time clock + auto date detection)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function updateNowBadge() {
  const now = new Date();
  const bs = gregorianToBengali(now.getFullYear(), now.getMonth() + 1, now.getDate());
  const h = now.getHours(), mi2 = now.getMinutes(), s = now.getSeconds();
  const t = `${bn(h)}:${mi2 < 10 ? '‡ß¶' + bn(mi2) : bn(mi2)}:${s < 10 ? '‡ß¶' + bn(s) : bn(s)}`;
  document.getElementById('nowBadge').textContent =
    `‚è∞ ‡¶è‡¶ñ‡¶®: ${BN_WD[now.getDay()]} ‚Ä¢ ${bn(bs.d)} ${BN_M[bs.m]}, ${bn(bs.y)} ‡¶¨‡¶ô‡ßç‡¶ó‡¶æ‡¶¨‡ßç‡¶¶ ‚Ä¢ ${t}`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MAIN RENDER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderAll() {
  document.getElementById('inYear').value = SEL.y;
  document.getElementById('inMonth').value = SEL.m;
  renderGrid();
  renderDayDetail();
  renderPanchang();
  renderMuhurtas();
  filterF(document.getElementById('fsrch').value);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CONTROLS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function shiftM(dir) {
  SEL.m += dir;
  if (SEL.m > 11) { SEL.m = 0; SEL.y++; }
  if (SEL.m < 0)  { SEL.m = 11; SEL.y--; }
  SEL.d = 1;
  renderAll();
}

function goToday() {
  const now = new Date();
  const bs = gregorianToBengali(now.getFullYear(), now.getMonth() + 1, now.getDate());
  SEL = { y: bs.y, m: bs.m, d: bs.d };
  renderAll();
}

function resetAll() {
  // Clear festival search
  document.getElementById('fsrch').value = '';
  // Reset month filter to "all"
  activeFM = -1;
  document.querySelectorAll('.mtab').forEach(b => b.classList.remove('on'));
  const allTab = document.querySelector('.mtab');
  if (allTab) allTab.classList.add('on');
  // Go to today
  goToday();
}

function setTheme(t, btn) {
  document.querySelectorAll('.tb').forEach(b => b.classList.remove('on'));
  btn.classList.add('on');
  document.body.className = t;
}

document.getElementById('inMonth').addEventListener('change', function () {
  SEL.m = +this.value; SEL.d = 1; renderAll();
});
document.getElementById('inYear').addEventListener('change', function () {
  const v = parseInt(this.value);
  if (!isNaN(v)) { SEL.y = v; SEL.d = 1; renderAll(); }
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INIT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
// Footer year
const cy = new Date().getFullYear();
document.getElementById('fy1').textContent = cy;
document.getElementById('fy2').textContent = cy;

// Auto detect today
const now = new Date();
const todayBS = gregorianToBengali(now.getFullYear(), now.getMonth() + 1, now.getDate());
TODAY_BS = { y: todayBS.y, m: todayBS.m, d: todayBS.d };
SEL = { y: todayBS.y, m: todayBS.m, d: todayBS.d };

buildTabs();
renderAll();
updateNowBadge();

// Live clock
setInterval(updateNowBadge, 1000);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SERVICE WORKER REGISTRATION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js')
      .then(reg => {
        console.log('[PWA] Service Worker registered:', reg.scope);
        // Check for updates
        reg.addEventListener('updatefound', () => {
          const newWorker = reg.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              showUpdateBanner();
            }
          });
        });
      })
      .catch(err => console.warn('[PWA] SW registration failed:', err));
  });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PWA INSTALL PROMPT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  showInstallBanner();
});

window.addEventListener('appinstalled', () => {
  hideInstallBanner();
  deferredPrompt = null;
  console.log('[PWA] App installed successfully!');
});

function showInstallBanner() {
  if (document.getElementById('installBanner')) return;
  const banner = document.createElement('div');
  banner.id = 'installBanner';
  banner.innerHTML = `
    <div style="background:linear-gradient(90deg,#1a0a40,#0a1828);border-top:2px solid #d4a030;
      padding:.6rem 1rem;display:flex;align-items:center;justify-content:space-between;
      gap:.8rem;font-family:'Noto Serif Bengali',serif;flex-wrap:wrap;
      position:fixed;bottom:0;left:0;right:0;z-index:9999;box-shadow:0 -4px 24px rgba(0,0,0,.5)">
      <div style="display:flex;align-items:center;gap:.6rem">
        <img src="icon-192.png" width="36" height="36" style="border-radius:8px">
        <div>
          <div style="font-size:.82rem;font-weight:700;color:#f0c848">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ</div>
          <div style="font-size:.68rem;color:#8888aa">‡¶π‡ßã‡¶Æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</div>
        </div>
      </div>
      <div style="display:flex;gap:.5rem">
        <button onclick="doInstall()" style="background:#d4a030;color:#180800;border:none;
          border-radius:8px;padding:.38rem .9rem;font-family:inherit;font-size:.78rem;
          font-weight:700;cursor:pointer">‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button onclick="hideInstallBanner()" style="background:transparent;color:#8888aa;
          border:1px solid #333355;border-radius:8px;padding:.38rem .7rem;
          font-family:inherit;font-size:.78rem;cursor:pointer">‡¶™‡¶∞‡ßá</button>
      </div>
    </div>`;
  document.body.appendChild(banner);
}

function hideInstallBanner() {
  const b = document.getElementById('installBanner');
  if (b) b.remove();
}

function doInstall() {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  deferredPrompt.userChoice.then(choice => {
    if (choice.outcome === 'accepted') console.log('[PWA] User accepted install');
    deferredPrompt = null;
    hideInstallBanner();
  });
}

function showUpdateBanner() {
  if (document.getElementById('updateBanner')) return;
  const banner = document.createElement('div');
  banner.id = 'updateBanner';
  banner.innerHTML = `
    <div style="background:linear-gradient(90deg,#1a2800,#001828);border-top:2px solid #44bb55;
      padding:.5rem 1rem;display:flex;align-items:center;justify-content:space-between;
      gap:.8rem;font-family:'Noto Serif Bengali',serif;flex-wrap:wrap;
      position:fixed;top:0;left:0;right:0;z-index:9999;box-shadow:0 4px 24px rgba(0,0,0,.5)">
      <div style="font-size:.78rem;color:#ede5d8">üîÑ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ó‡ßá‡¶õ‡ßá!</div>
      <button onclick="location.reload()" style="background:#44bb55;color:#001800;border:none;
        border-radius:8px;padding:.34rem .8rem;font-family:inherit;font-size:.75rem;
        font-weight:700;cursor:pointer">‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>`;
  document.body.appendChild(banner);
}
</script>
</body>
</html>